/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./source/_ts/anemo/$.ts":
/*!*******************************!*\
  !*** ./source/_ts/anemo/$.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ $)\n/* harmony export */ });\nfunction $(selectors, root) {\r\n    return (root || document).querySelector(selectors);\r\n}\r\n$.assert = function (selectors, root) {\r\n    const result = $(selectors, root);\r\n    if (!result) {\r\n        throw new Error('can not find element matching (' + selectors + ') in ' + (root || document));\r\n    }\r\n    return result;\r\n};\r\n$.all = function (selectors, root) {\r\n    return (root || document).querySelectorAll(selectors);\r\n};\r\n$.each = function (selectors, callback, root) {\r\n    $.all(selectors, root).forEach(callback);\r\n};\r\n$.create = function (tagName, attributes) {\r\n    const result = document.createElement(tagName);\r\n    if (attributes) {\r\n        for (const key in attributes) {\r\n            result.attr(key, attributes[key]);\r\n        }\r\n    }\r\n    return result;\r\n};\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/$.ts?");

/***/ }),

/***/ "./source/_ts/anemo/components/bgMusic.ts":
/*!************************************************!*\
  !*** ./source/_ts/anemo/components/bgMusic.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_musicUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/musicUtils */ \"./source/_ts/anemo/utils/musicUtils.ts\");\n/* harmony import */ var _$__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../$ */ \"./source/_ts/anemo/$.ts\");\n/* harmony import */ var _miscellaneous_topLayerPanel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../miscellaneous/topLayerPanel */ \"./source/_ts/anemo/miscellaneous/topLayerPanel.ts\");\n/* harmony import */ var _utils_anemoUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/anemoUtils */ \"./source/_ts/anemo/utils/anemoUtils.ts\");\n/* harmony import */ var _managers_configManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../managers/configManager */ \"./source/_ts/anemo/managers/configManager.ts\");\n/* harmony import */ var _utils_debugUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/debugUtils */ \"./source/_ts/anemo/utils/debugUtils.ts\");\n/* harmony import */ var _utils_userpref__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/userpref */ \"./source/_ts/anemo/utils/userpref.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst lyricSelector = '.bg-music-lyric';\r\nconst progressBarTimeCurrentSelector = '.bg-music-time span[data=current]';\r\nconst progressBarTimeLengthSelector = '.bg-music-time span[data=length]';\r\nconst progressBarSelector = '.bg-music-progress';\r\nconst progressBarSliderSelector = '.bg-music-progress>div';\r\nconst playlistButtonSelector = '#bg-music-playlist-button';\r\nconst playlistSelector = '.bg-music-playlist';\r\nconst playlistMaskSelector = '.bg-music-playlist-mask';\r\nconst playlistULSelector = '.bg-music-playlist-item-container>ul';\r\nconst playModeButtonSelector = '#bg-music-play-mode-button';\r\nconst playModeUserPrefKey = 'anemo-bg-music-play-mode';\r\nconst playModeDefaultValue = 'loop';\r\nconst previousButtonSelector = '#bg-music-previous-button';\r\nconst nextButtonSelector = '#bg-music-next-button';\r\nconst playPauseButtonSelector = '#bg-music-play-pause-button';\r\nconst panelSelector = '#bg-music-panel';\r\nconst panelOpenButtonSelector = '#bg-music-btn';\r\nconst audioSelector = '#bg-music-panel audio';\r\nconst musicTitleSelector = '.bg-music-title';\r\nconst musicSubtitleSelector = '.bg-music-subtitle';\r\nconst musicDiscSelector = '.bg-music-disc img';\r\nconst pcScreenMinWidthExclusive = 540;\r\nconst musicCoverControlSelector = '.bg-music-cover-control';\r\nconst musicCoverSelector = '.bg-music-cover';\r\nconst musicInfoSelector = '.bg-music-info';\r\nclass Lyric {\r\n    constructor(data) {\r\n        this._container = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(lyricSelector);\r\n        this._containerParent = this._container.parentElement;\r\n        this._data = data;\r\n        this._index = 0;\r\n        this._lines = [];\r\n        this._container.innerHTML = '';\r\n        this._data.forEach(line => {\r\n            const p = document.createElement('p');\r\n            p.textContent = line.text;\r\n            if (line.translation) {\r\n                p.innerHTML += ('<br>' + line.translation);\r\n            }\r\n            this._container.appendChild(p);\r\n            this._lines.push(p);\r\n        });\r\n        this.setCurrent(0);\r\n    }\r\n    setCurrent(index) {\r\n        if (index < 0 || index >= this._data.length) {\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_5__[\"default\"].warning(`can not set current lyric, because index(${index}) is out of range: [0, ${this._data.length})`);\r\n            return;\r\n        }\r\n        this._lines[this._index].attr('current', null);\r\n        this._index = index;\r\n        this._lines[index].attr('current', '');\r\n        const offset = this._lines.reduce((sum, line, i) => {\r\n            if (i > index) {\r\n                return sum;\r\n            }\r\n            if (i === index) {\r\n                return sum + (0.8 * line.offsetHeight);\r\n            }\r\n            return sum + line.offsetHeight;\r\n        }, 0);\r\n        const halfDisplayHeight = this._containerParent.offsetHeight * 0.5;\r\n        const translateY = `translateY(${halfDisplayHeight - offset}px)`;\r\n        this._container.css({\r\n            'transform': translateY,\r\n            '-webkit-transform': translateY\r\n        });\r\n    }\r\n    update(time, force) {\r\n        if (this._data.length === 0) {\r\n            return;\r\n        }\r\n        if (!force && this._containerParent.offsetHeight === 0) {\r\n            return;\r\n        }\r\n        const i = this._index;\r\n        const data = this._data;\r\n        const flag0 = (i < 0) || (i > data.length - 1);\r\n        const flag1 = time < data[i].time;\r\n        const flag2 = data[i + 1] && (time >= data[i + 1].time);\r\n        if (force || flag0 || flag1 || flag2) {\r\n            for (let j = 0; j < data.length; j++) {\r\n                if (time >= data[j].time && (((j + 1) >= data.length) || (time < data[j + 1].time))) {\r\n                    this.setCurrent(j);\r\n                    return;\r\n                }\r\n            }\r\n            this.setCurrent(0);\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_5__[\"default\"].warning('lyric update fallback');\r\n        }\r\n    }\r\n    static downloadAsync(url) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const res = yield fetch(url);\r\n            let rawText = yield res.text();\r\n            let data = [];\r\n            if (rawText.length > 0) {\r\n                rawText = rawText.replace(/([^\\]^\\n])\\[/g, (_, p1) => (p1 + '\\n['));\r\n                const lyricText = rawText.split('\\n');\r\n                for (let i = 0; i < lyricText.length; i++) {\r\n                    const lrcTimes = lyricText[i].match(/\\[(\\d{2}):(\\d{2})(\\.(\\d{2,3}))?]/g);\r\n                    if (!lrcTimes) {\r\n                        continue;\r\n                    }\r\n                    let lrcText = lyricText[i].replace(/.*\\[(\\d{2}):(\\d{2})(\\.(\\d{2,3}))?]/g, '')\r\n                        .replace(/<(\\d{2}):(\\d{2})(\\.(\\d{2,3}))?>/g, '')\r\n                        .replace(/^\\s+|\\s+$$/g, '');\r\n                    let lrcTranslation;\r\n                    const index = lrcText.lastIndexOf(' (');\r\n                    if (index > -1 && lrcText.endsWith(')')) {\r\n                        lrcTranslation = lrcText.substring(index + 2, lrcText.length - 1);\r\n                        lrcText = lrcText.substring(0, index);\r\n                    }\r\n                    for (let j = 0; j < lrcTimes.length; j++) {\r\n                        const oneTime = /\\[(\\d{2}):(\\d{2})(\\.(\\d{2,3}))?]/.exec(lrcTimes[j]);\r\n                        const min2sec = parseInt(oneTime[1]) * 60;\r\n                        const sec2sec = parseInt(oneTime[2]);\r\n                        const msec2sec = oneTime[4] ? parseInt(oneTime[4]) / ((oneTime[4] + '').length === 2 ? 100 : 1000) : 0;\r\n                        const lrcTime = min2sec + sec2sec + msec2sec;\r\n                        data.push({\r\n                            time: lrcTime,\r\n                            text: lrcText,\r\n                            translation: lrcTranslation\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            if (data.length === 0) {\r\n                data.push({\r\n                    time: 0,\r\n                    text: 'This music has no lyrics now',\r\n                    translation: '该音乐暂无歌词'\r\n                });\r\n            }\r\n            else {\r\n                data = data.filter(item => item.text).sort((a, b) => a.time - b.time);\r\n                for (let i = data.length - 1; i >= 1; i--) {\r\n                    if (data[i - 1].time !== data[i].time) {\r\n                        continue;\r\n                    }\r\n                    if (typeof data[i].translation === 'undefined') {\r\n                        continue;\r\n                    }\r\n                    if (data[i].translation === data[i - 1].translation) {\r\n                        data.splice(i, 1);\r\n                    }\r\n                }\r\n                if (data[0].time > 0) {\r\n                    data.unshift({\r\n                        time: 0,\r\n                        text: '...'\r\n                    });\r\n                }\r\n            }\r\n            return new Lyric(data);\r\n        });\r\n    }\r\n}\r\nclass ProgressBar {\r\n    constructor(events) {\r\n        this._timeCurrent = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(progressBarTimeCurrentSelector);\r\n        this._timeLength = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(progressBarTimeLengthSelector);\r\n        this._progressBar = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(progressBarSelector);\r\n        this._progressSlider = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(progressBarSliderSelector);\r\n        this._events = events;\r\n        this._progress = 0;\r\n        this.update(0, 0);\r\n        this._progressBar.addEventListener('mousedown', this.startSeekingMouse.bind(this));\r\n        this._progressBar.addEventListener('touchstart', this.startSeekingTouch.bind(this), { passive: false });\r\n    }\r\n    get progress() {\r\n        return this._progress;\r\n    }\r\n    update(progress, duration) {\r\n        this._progress = progress;\r\n        this._timeCurrent.textContent = _utils_musicUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].formatTime(progress * duration);\r\n        this._timeLength.textContent = _utils_musicUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].formatTime(duration);\r\n        this._progressSlider.css('width', (progress * 100).toFixed(2) + '%');\r\n    }\r\n    calcSeekProgress(clientX) {\r\n        const rect = this._progressBar.getBoundingClientRect();\r\n        const percentage = (clientX - rect.left) / rect.width;\r\n        return Math.min(Math.max(percentage, 0), 1);\r\n    }\r\n    startSeekingMouse(e) {\r\n        e.preventDefault();\r\n        if (!this._events.seekStart()) {\r\n            return;\r\n        }\r\n        const seeking = (e) => {\r\n            e.preventDefault();\r\n            const progress = this.calcSeekProgress(e.clientX);\r\n            this._events.seeking(progress);\r\n        };\r\n        const endSeeking = (e) => {\r\n            e.preventDefault();\r\n            const progress = this.calcSeekProgress(e.clientX);\r\n            this._events.seekEnd(progress);\r\n            document.removeEventListener('mousemove', seeking);\r\n            document.removeEventListener('mouseup', endSeeking);\r\n        };\r\n        document.addEventListener('mousemove', seeking);\r\n        document.addEventListener('mouseup', endSeeking);\r\n    }\r\n    startSeekingTouch(e) {\r\n        if (!e.cancelable) {\r\n            return;\r\n        }\r\n        e.preventDefault();\r\n        if (!this._events.seekStart()) {\r\n            return;\r\n        }\r\n        const seeking = (e) => {\r\n            e.preventDefault();\r\n            const progress = this.calcSeekProgress(e.changedTouches[0].clientX);\r\n            this._events.seeking(progress);\r\n        };\r\n        const endSeeking = (e) => {\r\n            e.preventDefault();\r\n            const progress = this.calcSeekProgress(e.changedTouches[0].clientX);\r\n            this._events.seekEnd(progress);\r\n            document.removeEventListener('touchmove', seeking);\r\n            document.removeEventListener('touchend', endSeeking);\r\n        };\r\n        document.addEventListener('touchmove', seeking, { passive: false });\r\n        document.addEventListener('touchend', endSeeking, { passive: false });\r\n    }\r\n}\r\nclass Playlist {\r\n    constructor(musics, events) {\r\n        this._ul = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(playlistULSelector);\r\n        this._musics = musics;\r\n        this._playIndex = -1;\r\n        this._events = events;\r\n        this._switchMusicLock = false;\r\n    }\r\n    updateWidgetView() {\r\n        this._ul.innerHTML = '';\r\n        this._musics.forEach((music, index) => {\r\n            const i = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].create('i', {\r\n                'class': _managers_configManager__WEBPACK_IMPORTED_MODULE_4__[\"default\"].siteConfig.bgMusic.playing_icon\r\n            });\r\n            const title = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].create('div');\r\n            title.textContent = music.title;\r\n            const subtitle = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].create('div');\r\n            subtitle.textContent = music.author;\r\n            const li = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].create('li');\r\n            li.appendChild(i);\r\n            li.appendChild(title);\r\n            li.appendChild(subtitle);\r\n            li.attr('index', index.toString());\r\n            li.addEventListener('click', () => {\r\n                const musicIndex = parseInt(li.attr('index'));\r\n                this.switchToMusicAsync(musicIndex, 0, true, false);\r\n            });\r\n            this._ul.appendChild(li);\r\n        });\r\n    }\r\n    get musicCount() {\r\n        return this._ul.childElementCount;\r\n    }\r\n    get playIndex() {\r\n        return this._playIndex;\r\n    }\r\n    switchToMusicAsync(index, time, playImmediately, force) {\r\n        var _a;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (this.musicCount === 0) {\r\n                return;\r\n            }\r\n            if (this._switchMusicLock) {\r\n                _utils_debugUtils__WEBPACK_IMPORTED_MODULE_5__[\"default\"].warning('to avoid violation, you can not switch music now');\r\n                return;\r\n            }\r\n            index %= this.musicCount;\r\n            index = (index < 0) ? (index + this.musicCount) : index;\r\n            if (index !== this._playIndex) {\r\n                (_a = this._ul.children[this._playIndex]) === null || _a === void 0 ? void 0 : _a.attr('current', null);\r\n                this._ul.children[index].attr('current', '');\r\n            }\r\n            else if (!force) {\r\n                return;\r\n            }\r\n            this._switchMusicLock = true;\r\n            {\r\n                this._playIndex = index;\r\n                const music = this._musics[index];\r\n                yield this._events.switchMusic(music, time, playImmediately);\r\n            }\r\n            this._switchMusicLock = false;\r\n        });\r\n    }\r\n    switchToNextMusic(direction, random, playImmediately, force) {\r\n        let index = this._playIndex;\r\n        const step = (direction === 'forward') ? 1 : -1;\r\n        if (random) {\r\n            const ri = _utils_anemoUtils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].randomInt(0, this.musicCount);\r\n            index = (ri === index) ? (ri + step) : ri;\r\n        }\r\n        else {\r\n            index += step;\r\n        }\r\n        this.switchToMusicAsync(index, 0, playImmediately, force);\r\n    }\r\n    switchToSpecificMusic(index, time, playImmediately, force) {\r\n        this.switchToMusicAsync(index, time, playImmediately, force);\r\n    }\r\n    static initializeWidget() {\r\n        this._widgetRoot = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(playlistSelector);\r\n        const openButton = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(playlistButtonSelector);\r\n        openButton.addEventListener('click', () => Playlist.showWidget());\r\n        const mask = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(playlistMaskSelector);\r\n        mask.addEventListener('click', () => Playlist.hideWidget());\r\n    }\r\n    static showWidget() {\r\n        this._widgetRoot.attr('show', '');\r\n    }\r\n    static hideWidget() {\r\n        this._widgetRoot.attr('show', null);\r\n    }\r\n    static downloadAsync(links, events) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (links.length === 0) {\r\n                return new Playlist([], events);\r\n            }\r\n            const musics = yield _utils_musicUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].requestAPIAsync(links);\r\n            return new Playlist(musics, events);\r\n        });\r\n    }\r\n}\r\nclass PlayModeController {\r\n    constructor() {\r\n        this._button = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(playModeButtonSelector);\r\n        this._button.addEventListener('click', () => this.switchPlayMode());\r\n        const storedMode = (0,_utils_userpref__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(playModeUserPrefKey);\r\n        this._playMode = (storedMode || playModeDefaultValue);\r\n        this.updateButton();\r\n    }\r\n    get playMode() {\r\n        return this._playMode;\r\n    }\r\n    switchPlayMode() {\r\n        this._playMode = PlayModeController.nextPlayMode(this._playMode);\r\n        (0,_utils_userpref__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(playModeUserPrefKey, this._playMode);\r\n        this.updateButton();\r\n    }\r\n    updateButton() {\r\n        this._button.attr('mode', this._playMode);\r\n    }\r\n    static nextPlayMode(current) {\r\n        switch (current) {\r\n            case 'loop': return 'loop-one';\r\n            case 'loop-one': return 'random';\r\n            case 'random': return 'loop';\r\n        }\r\n    }\r\n}\r\nclass MusicPlayer {\r\n    constructor() {\r\n        this._enableTimeUpdating = true;\r\n        this._coverModeOnMobileDevice = true;\r\n        this._audio = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(audioSelector);\r\n        this._musicTitle = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(musicTitleSelector);\r\n        this._musicSubtitle = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(musicSubtitleSelector);\r\n        this._musicDisc = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(musicDiscSelector);\r\n        this._panel = new _miscellaneous_topLayerPanel__WEBPACK_IMPORTED_MODULE_2__[\"default\"](panelSelector, panelOpenButtonSelector, {\r\n            beforeOpen: () => this._enableTimeUpdating = true,\r\n            afterOpen: () => {\r\n                if (this.isAudioLoaded()) {\r\n                    this.updateProgressBar();\r\n                    this.updateLyric(true);\r\n                }\r\n            },\r\n            afterClose: () => this._enableTimeUpdating = false\r\n        });\r\n        this._playModeController = new PlayModeController();\r\n        this._progressBar = new ProgressBar({\r\n            seekStart: () => {\r\n                if (this.isAudioLoaded()) {\r\n                    this._enableTimeUpdating = false;\r\n                    return true;\r\n                }\r\n                return false;\r\n            },\r\n            seeking: progress => {\r\n                this.updateProgressBar(progress);\r\n                this.updateLyric(false, progress * this._audio.duration);\r\n            },\r\n            seekEnd: progress => {\r\n                this._audio.currentTime = progress * this._audio.duration;\r\n                this._enableTimeUpdating = true;\r\n            }\r\n        });\r\n        this.initAudioEvents();\r\n        this.initCtrlButtonEvents();\r\n        this.initMobileDeviceEvents();\r\n        Playlist.initializeWidget();\r\n    }\r\n    initAudioEvents() {\r\n        this._audio.addEventListener('load', () => {\r\n            this.updateProgressBar();\r\n            this.updateLyric(true);\r\n        });\r\n        this._audio.addEventListener('timeupdate', () => {\r\n            if (this._enableTimeUpdating) {\r\n                this.updateProgressBar();\r\n                this.updateLyric(false);\r\n            }\r\n        });\r\n        this._audio.addEventListener('ended', () => this.playNextMusic('forward'));\r\n    }\r\n    initCtrlButtonEvents() {\r\n        const playPauseButton = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(playPauseButtonSelector);\r\n        const prevButton = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(previousButtonSelector);\r\n        const nextButton = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(nextButtonSelector);\r\n        playPauseButton.addEventListener('click', () => {\r\n            if (this._audio.paused) {\r\n                this.playCurrentMusic();\r\n            }\r\n            else {\r\n                this.pauseCurrentMusic();\r\n            }\r\n        });\r\n        prevButton.addEventListener('click', () => this.playNextMusic('backward'));\r\n        nextButton.addEventListener('click', () => this.playNextMusic('forward'));\r\n    }\r\n    initMobileDeviceEvents() {\r\n        const coverControl = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(musicCoverControlSelector);\r\n        const cover = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(musicCoverSelector);\r\n        const info = _$__WEBPACK_IMPORTED_MODULE_1__[\"default\"].assert(musicInfoSelector);\r\n        coverControl.addEventListener('click', e => {\r\n            if (document.documentElement.clientWidth > pcScreenMinWidthExclusive) {\r\n                return;\r\n            }\r\n            if (e.target !== coverControl) {\r\n                return;\r\n            }\r\n            this._coverModeOnMobileDevice = !this._coverModeOnMobileDevice;\r\n            if (this._coverModeOnMobileDevice) {\r\n                cover.attr('mobile-active', '');\r\n                info.attr('mobile-active', null);\r\n            }\r\n            else {\r\n                cover.attr('mobile-active', null);\r\n                info.attr('mobile-active', '');\r\n            }\r\n        });\r\n    }\r\n    isAudioLoaded() {\r\n        return isFinite(this._audio.duration);\r\n    }\r\n    updateProgressBar(progress) {\r\n        if (typeof progress === 'undefined') {\r\n            progress = this._audio.currentTime / this._audio.duration;\r\n        }\r\n        this._progressBar.update(progress, this._audio.duration);\r\n    }\r\n    updateLyric(force, time) {\r\n        if (typeof time === 'undefined') {\r\n            time = this._audio.currentTime;\r\n        }\r\n        this._lyric.update(time, force);\r\n    }\r\n    get isPlaying() {\r\n        return !this._audio.paused;\r\n    }\r\n    get currentTime() {\r\n        return this._audio.currentTime;\r\n    }\r\n    get currentMusicIndex() {\r\n        if (!this._playlist) {\r\n            return -1;\r\n        }\r\n        return this._playlist.playIndex;\r\n    }\r\n    playCurrentMusic(time = 0) {\r\n        if (!this._audio.paused) {\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_5__[\"default\"].warning('can not play music because music has been being played');\r\n            return;\r\n        }\r\n        if (typeof this._playlist === 'undefined') {\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_5__[\"default\"].error('can not play music because playlist has not been loaded');\r\n            return;\r\n        }\r\n        if (this._playlist.musicCount === 0) {\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_5__[\"default\"].error('can not play music because there is no music in the playlist');\r\n            return;\r\n        }\r\n        this._panel.panelElement.attr('playing', '');\r\n        this._panel.openBtnElement.attr('playing', '');\r\n        this._audio.play().then(() => this._audio.currentTime = time);\r\n    }\r\n    pauseCurrentMusic() {\r\n        if (this._audio.paused) {\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_5__[\"default\"].warning('can not pause music because music has been paused');\r\n            return;\r\n        }\r\n        this._panel.panelElement.attr('playing', null);\r\n        this._panel.openBtnElement.attr('playing', null);\r\n        this._audio.pause();\r\n    }\r\n    playNextMusic(direction) {\r\n        if (typeof this._playlist === 'undefined') {\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_5__[\"default\"].error('can not play next music because playlist has not been loaded');\r\n            return;\r\n        }\r\n        if (this._playlist.musicCount === 0) {\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_5__[\"default\"].error('can not play next music because there is no music in the playlist');\r\n            return;\r\n        }\r\n        if (this._playModeController.playMode === 'loop-one') {\r\n            this._audio.currentTime = 0;\r\n            this.playCurrentMusic();\r\n        }\r\n        else {\r\n            this._playlist.switchToNextMusic(direction, this._playModeController.playMode === 'random', true, true);\r\n        }\r\n    }\r\n    playSpecificMusic(index, time) {\r\n        if (typeof this._playlist === 'undefined') {\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_5__[\"default\"].error('can not play next music because playlist has not been loaded');\r\n            return;\r\n        }\r\n        if (this._playlist.musicCount === 0) {\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_5__[\"default\"].error('can not play next music because there is no music in the playlist');\r\n            return;\r\n        }\r\n        this._playlist.switchToSpecificMusic(index, time, true, true);\r\n    }\r\n    reloadMusicAsync(music) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!this._audio.paused) {\r\n                this.pauseCurrentMusic();\r\n            }\r\n            this._lyric = yield Lyric.downloadAsync(music.lrc);\r\n            this._musicTitle.textContent = music.title;\r\n            this._musicTitle.title = music.title;\r\n            this._musicSubtitle.textContent = music.author;\r\n            this._musicSubtitle.title = music.author;\r\n            this._musicDisc.src = music.pic;\r\n            this._audio.src = music.url;\r\n            this._audio.currentTime = 0;\r\n        });\r\n    }\r\n    downloadPlaylistAsync(musicLinks) {\r\n        return Playlist.downloadAsync(musicLinks, {\r\n            switchMusic: (music, time, playImmediately) => __awaiter(this, void 0, void 0, function* () {\r\n                yield this.reloadMusicAsync(music);\r\n                if (playImmediately) {\r\n                    this.playCurrentMusic(time);\r\n                }\r\n            })\r\n        });\r\n    }\r\n    setPlaylist(playlist, playImmediatelyOrMusicIndex, time) {\r\n        this._playlist = playlist;\r\n        playlist.updateWidgetView();\r\n        if (playlist.musicCount === 0) {\r\n            this._panel.openBtnElement.css('display', 'none');\r\n            if (!this._audio.paused) {\r\n                this.pauseCurrentMusic();\r\n            }\r\n            return;\r\n        }\r\n        this._panel.openBtnElement.css('display', null);\r\n        if (typeof playImmediatelyOrMusicIndex === 'boolean') {\r\n            playlist.switchToNextMusic('forward', this._playModeController.playMode === 'random', playImmediatelyOrMusicIndex, true);\r\n        }\r\n        else {\r\n            playlist.switchToSpecificMusic(playImmediatelyOrMusicIndex, time, true, true);\r\n        }\r\n    }\r\n}\r\nlet musicPlayer;\r\nlet cancelAutoplayFunc = null;\r\nlet hasOverriddenPlaylist = false;\r\nlet defaultPlaylistTime = 0;\r\nlet defaultMusicIndex = -1;\r\nlet defaultPlaylistPlaying = false;\r\nconst component_bgMusic = {\r\n    name: 'background-music',\r\n    initialize() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!_managers_configManager__WEBPACK_IMPORTED_MODULE_4__[\"default\"].siteConfig.bgMusic.enable) {\r\n                return false;\r\n            }\r\n            musicPlayer = new MusicPlayer();\r\n            const musicLinks = _managers_configManager__WEBPACK_IMPORTED_MODULE_4__[\"default\"].siteConfig.bgMusic.music_links;\r\n            const playlist = yield musicPlayer.downloadPlaylistAsync(musicLinks || []);\r\n            musicPlayer.setPlaylist(playlist, false);\r\n            return true;\r\n        });\r\n    },\r\n    cleanup() {\r\n        if (!cancelAutoplayFunc) {\r\n            return;\r\n        }\r\n        cancelAutoplayFunc();\r\n        cancelAutoplayFunc = null;\r\n    },\r\n    refresh() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const musicElement = (0,_$__WEBPACK_IMPORTED_MODULE_1__[\"default\"])('.bg-music-override');\r\n            let time;\r\n            let musicIndex;\r\n            let autoplay;\r\n            let musicLinks;\r\n            if (!musicElement && hasOverriddenPlaylist) {\r\n                hasOverriddenPlaylist = false;\r\n                time = defaultPlaylistTime;\r\n                musicIndex = defaultMusicIndex;\r\n                autoplay = defaultPlaylistPlaying;\r\n                musicLinks = _managers_configManager__WEBPACK_IMPORTED_MODULE_4__[\"default\"].siteConfig.bgMusic.music_links || [];\r\n            }\r\n            else if (musicElement) {\r\n                hasOverriddenPlaylist = true;\r\n                defaultPlaylistTime = musicPlayer.currentTime;\r\n                defaultMusicIndex = musicPlayer.currentMusicIndex;\r\n                defaultPlaylistPlaying = musicPlayer.isPlaying;\r\n                time = 0;\r\n                musicIndex = -1;\r\n                autoplay = musicPlayer.isPlaying || musicElement.hasAttribute('autoplay');\r\n                musicLinks = JSON.parse(musicElement.attr('playlist') || '[]');\r\n                _utils_debugUtils__WEBPACK_IMPORTED_MODULE_5__[\"default\"].info('override background music.');\r\n            }\r\n            else {\r\n                return;\r\n            }\r\n            const playlist = yield musicPlayer.downloadPlaylistAsync(musicLinks);\r\n            if (autoplay) {\r\n                cancelAutoplayFunc = _utils_musicUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].autoplay(() => {\r\n                    if (musicIndex >= 0) {\r\n                        musicPlayer.setPlaylist(playlist, musicIndex, time);\r\n                    }\r\n                    else {\r\n                        musicPlayer.setPlaylist(playlist, true);\r\n                    }\r\n                    _utils_debugUtils__WEBPACK_IMPORTED_MODULE_5__[\"default\"].info('auto play background music.');\r\n                });\r\n            }\r\n            else {\r\n                musicPlayer.setPlaylist(playlist, false);\r\n            }\r\n        });\r\n    }\r\n};\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (component_bgMusic);\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/components/bgMusic.ts?");

/***/ }),

/***/ "./source/_ts/anemo/components/comments/twikoo.ts":
/*!********************************************************!*\
  !*** ./source/_ts/anemo/components/comments/twikoo.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _$__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../$ */ \"./source/_ts/anemo/$.ts\");\n/* harmony import */ var _managers_componentManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../managers/componentManager */ \"./source/_ts/anemo/managers/componentManager.ts\");\n/* harmony import */ var _managers_configManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../managers/configManager */ \"./source/_ts/anemo/managers/configManager.ts\");\n\r\n\r\n\r\nconst commentImageSelector = '#twikoo .tk-content img:not(.tk-owo-emotion)';\r\nconst component_comment_twikoo = {\r\n    name: 'twikoo',\r\n    initialize() {\r\n        const { comments, twikoo } = _managers_configManager__WEBPACK_IMPORTED_MODULE_2__[\"default\"].siteConfig;\r\n        if (!comments.enable || comments.type !== 'twikoo') {\r\n            return false;\r\n        }\r\n        _managers_componentManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].registerAPI(this, 'latestComments', (count, includeReply) => {\r\n            return window.twikoo.getRecentComments({\r\n                envId: twikoo.envId,\r\n                region: twikoo.region,\r\n                pageSize: count,\r\n                includeReply: includeReply\r\n            });\r\n        });\r\n        return true;\r\n    },\r\n    refresh() {\r\n        if (!(0,_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('#comments') || !window.twikoo) {\r\n            return;\r\n        }\r\n        const { twikoo } = _managers_configManager__WEBPACK_IMPORTED_MODULE_2__[\"default\"].siteConfig;\r\n        window.twikoo.init({\r\n            envId: twikoo.envId,\r\n            region: twikoo.region,\r\n            path: twikoo.path,\r\n            el: '#twikoo',\r\n            onCommentLoaded: () => {\r\n                const images = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].all(commentImageSelector);\r\n                _managers_componentManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].invokeAPI('imageViewer', images);\r\n            }\r\n        });\r\n    }\r\n};\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (component_comment_twikoo);\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/components/comments/twikoo.ts?");

/***/ }),

/***/ "./source/_ts/anemo/components/fancybox.ts":
/*!*************************************************!*\
  !*** ./source/_ts/anemo/components/fancybox.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _$__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../$ */ \"./source/_ts/anemo/$.ts\");\n/* harmony import */ var _managers_componentManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../managers/componentManager */ \"./source/_ts/anemo/managers/componentManager.ts\");\n/* harmony import */ var _managers_configManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../managers/configManager */ \"./source/_ts/anemo/managers/configManager.ts\");\n\r\n\r\n\r\nfunction getImageUrl(image, rep) {\r\n    let url = image.attr('src') || '';\r\n    if (rep && rep[0]) {\r\n        if (/^re:/.test(rep[0])) {\r\n            const reg = new RegExp(rep[0].replace(/^re:/, ''), 'gi');\r\n            url = url.replace(reg, rep[1]);\r\n        }\r\n        else {\r\n            url = url.replace(rep[0], rep[1]);\r\n        }\r\n    }\r\n    return url;\r\n}\r\nfunction registerImages(images) {\r\n    const { fancybox } = _managers_configManager__WEBPACK_IMPORTED_MODULE_2__[\"default\"].siteConfig;\r\n    for (let i = 0; i < images.length; i++) {\r\n        const image = images[i];\r\n        const url = getImageUrl(image, fancybox.img_url_replace);\r\n        const title = image.attr('title') || image.attr('alt') || 'unknown image';\r\n        const a = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create('a', {\r\n            'href': url,\r\n            'title': title,\r\n            'data-fancybox': 'gallery',\r\n            'data-caption': title\r\n        });\r\n        image.wrap(a);\r\n        const p = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create('p', { 'class': 'image-caption' });\r\n        p.textContent = title;\r\n        a.appendChild(p);\r\n    }\r\n}\r\nconst component_fancybox = {\r\n    name: 'fancybox',\r\n    initialize: function () {\r\n        const { fancybox } = _managers_configManager__WEBPACK_IMPORTED_MODULE_2__[\"default\"].siteConfig;\r\n        if (!fancybox.enable) {\r\n            return false;\r\n        }\r\n        _managers_componentManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].registerAPI(this, 'imageViewer', images => {\r\n            registerImages(images);\r\n        });\r\n        return true;\r\n    },\r\n    refresh() {\r\n        if (!window.Fancybox) {\r\n            return;\r\n        }\r\n        window.Fancybox.destroy();\r\n        window.Fancybox.bind('[data-fancybox]', _managers_configManager__WEBPACK_IMPORTED_MODULE_2__[\"default\"].siteConfig.fancybox.options || {});\r\n        const images = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].all('.entry-content img:not([nofancybox])');\r\n        registerImages(images);\r\n    }\r\n};\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (component_fancybox);\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/components/fancybox.ts?");

/***/ }),

/***/ "./source/_ts/anemo/components/localSearch.ts":
/*!****************************************************!*\
  !*** ./source/_ts/anemo/components/localSearch.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _$__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../$ */ \"./source/_ts/anemo/$.ts\");\n/* harmony import */ var _miscellaneous_topLayerPanel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../miscellaneous/topLayerPanel */ \"./source/_ts/anemo/miscellaneous/topLayerPanel.ts\");\n/* harmony import */ var _utils_debugUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/debugUtils */ \"./source/_ts/anemo/utils/debugUtils.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\nconst searchInputSelector = 'div.search-div>input';\r\nconst searchResultsSelector = 'div.search-result-list';\r\nlet searchResultNothing = '';\r\nlet localSearchInitialized = false;\r\nlet searchInput = null;\r\nlet searchResults = null;\r\nlet panel = null;\r\nfunction initLocalSearchAsync(path) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        searchInput.disabled = true;\r\n        const response = yield fetch(path);\r\n        const xmlText = yield response.text();\r\n        const xml = new DOMParser().parseFromString(xmlText, 'text/xml');\r\n        const data = Array.from(_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].all('entry', xml)).map(entry => {\r\n            var _a, _b, _c;\r\n            return ({\r\n                title: (((_a = (0,_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('title', entry)) === null || _a === void 0 ? void 0 : _a.textContent) || 'Untitled').trim(),\r\n                content: (((_b = (0,_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('content', entry)) === null || _b === void 0 ? void 0 : _b.textContent) || '').trim().replace(/<[^>]+>/g, ''),\r\n                url: (((_c = (0,_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('url', entry)) === null || _c === void 0 ? void 0 : _c.textContent) || '')\r\n            });\r\n        });\r\n        searchInput.addEventListener('input', () => {\r\n            const inputText = searchInput.value.trim().toLowerCase();\r\n            let resultHTML = '';\r\n            if (inputText.length > 0) {\r\n                let keywords = inputText.split(' ').filter(k => k.length > 0);\r\n                keywords = Array.from(new Set(keywords));\r\n                _utils_debugUtils__WEBPACK_IMPORTED_MODULE_2__[\"default\"].info('keyword list:', keywords);\r\n                const validatedKws = keywords.map(kw => kw.replace(/[()[\\]{}$^|?+*.\\\\]/gi, '\\\\$&'));\r\n                const kwReg = new RegExp(`(${validatedKws.join('|')})`, 'gi');\r\n                _utils_debugUtils__WEBPACK_IMPORTED_MODULE_2__[\"default\"].info('validated keyword list:', validatedKws);\r\n                data.forEach(data => {\r\n                    const titleLower = data.title.toLowerCase();\r\n                    const contentLower = data.content.toLowerCase();\r\n                    let isMatch = true;\r\n                    const keywordPos = [];\r\n                    if (contentLower.length > 0) {\r\n                        for (const keyword of keywords) {\r\n                            const titleIndex = titleLower.indexOf(keyword);\r\n                            const contentIndex = contentLower.indexOf(keyword);\r\n                            if (titleIndex < 0 && contentIndex < 0) {\r\n                                isMatch = false;\r\n                                break;\r\n                            }\r\n                            if (contentIndex >= 0) {\r\n                                keywordPos.push(contentIndex);\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        isMatch = false;\r\n                    }\r\n                    if (!isMatch) {\r\n                        return;\r\n                    }\r\n                    let matchedContent = '...... ';\r\n                    let matchedRanges;\r\n                    if (keywordPos.length === 0) {\r\n                        matchedRanges = [[0, Math.min(100, data.content.length)]];\r\n                    }\r\n                    else {\r\n                        keywordPos.sort((a, b) => a - b);\r\n                        matchedRanges = keywordPos.reduce((result, pos) => {\r\n                            const start = Math.max(pos - 20, 0);\r\n                            const end = Math.min(start + 100, data.content.length);\r\n                            if (result.length > 0) {\r\n                                const last = result[result.length - 1];\r\n                                if (last[1] >= start) {\r\n                                    last[1] = end;\r\n                                    return result;\r\n                                }\r\n                            }\r\n                            result.push([start, end]);\r\n                            return result;\r\n                        }, []);\r\n                    }\r\n                    for (const range of matchedRanges) {\r\n                        const content = data.content.substring(range[0], range[1]);\r\n                        matchedContent += content.replace(kwReg, '<span class=\"search-word\">$&</span>');\r\n                        matchedContent += ' ...... ';\r\n                    }\r\n                    const matchedTitle = data.title.replace(kwReg, '<span class=\"search-word\">$&</span>');\r\n                    resultHTML += `<a href=\"${data.url}\" class=\"search-result\">`;\r\n                    resultHTML += `<span>${matchedTitle}</span>`;\r\n                    resultHTML += `<p>${matchedContent}</p>`;\r\n                    resultHTML += '</a>';\r\n                });\r\n            }\r\n            if (resultHTML.length === 0) {\r\n                resultHTML = searchResultNothing;\r\n                searchInput.removeClass('valid');\r\n                if (inputText.length > 0) {\r\n                    searchInput.addClass('invalid');\r\n                }\r\n            }\r\n            else {\r\n                searchInput.addClass('valid').removeClass('invalid');\r\n            }\r\n            searchResults.innerHTML = resultHTML;\r\n        });\r\n        localSearchInitialized = true;\r\n        searchInput.disabled = false;\r\n        searchInput.focus();\r\n    });\r\n}\r\nfunction resetLocalSearch() {\r\n    searchInput.value = '';\r\n    searchInput.removeClass('invalid').removeClass('valid');\r\n    searchResults.innerHTML = searchResultNothing;\r\n}\r\nconst component_localSearch = {\r\n    name: 'local-search',\r\n    initialize: function () {\r\n        searchInput = (0,_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(searchInputSelector);\r\n        if (!searchInput) {\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('can not find ' + searchInputSelector);\r\n            return false;\r\n        }\r\n        searchResults = (0,_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(searchResultsSelector);\r\n        if (!searchResults) {\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_2__[\"default\"].error('can not find ' + searchResultsSelector);\r\n            return false;\r\n        }\r\n        searchResultNothing = searchResults.innerHTML;\r\n        panel = new _miscellaneous_topLayerPanel__WEBPACK_IMPORTED_MODULE_1__[\"default\"]('#search-panel', '#search-btn', {\r\n            afterOpen: () => {\r\n                if (localSearchInitialized) {\r\n                    searchInput.focus();\r\n                }\r\n                else {\r\n                    const relativePath = '/local-search.xml';\r\n                    initLocalSearchAsync(relativePath);\r\n                }\r\n            },\r\n            beforeClose: () => searchInput.blur(),\r\n            afterClose: () => resetLocalSearch()\r\n        });\r\n        return true;\r\n    },\r\n    refresh: function () {\r\n        panel.closeAsync(false, true);\r\n    }\r\n};\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (component_localSearch);\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/components/localSearch.ts?");

/***/ }),

/***/ "./source/_ts/anemo/components/markdownBeautifier.ts":
/*!***********************************************************!*\
  !*** ./source/_ts/anemo/components/markdownBeautifier.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _$__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../$ */ \"./source/_ts/anemo/$.ts\");\n/* harmony import */ var _utils_anemoUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/anemoUtils */ \"./source/_ts/anemo/utils/anemoUtils.ts\");\n/* harmony import */ var _managers_configManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../managers/configManager */ \"./source/_ts/anemo/managers/configManager.ts\");\n/* harmony import */ var _utils_debugUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/debugUtils */ \"./source/_ts/anemo/utils/debugUtils.ts\");\n\r\n\r\n\r\n\r\nconst markdownBodySelector = '.markdown-body';\r\nfunction beautifyH1H2(md) {\r\n    _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].all('h1, h2', md).forEach(heading => {\r\n        const span = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create('span');\r\n        Array.from(heading.childNodes).forEach((node, i) => {\r\n            if (i > 0) {\r\n                span.appendChild(node);\r\n            }\r\n        });\r\n        heading.appendChild(span);\r\n    });\r\n}\r\nfunction beautifyTabs(md) {\r\n    _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].all('div.tab', md).forEach(tab => {\r\n        const tabId = tab.attr('tab-id');\r\n        const tabName = tab.attr('tab-name');\r\n        if (!tabId || !tabName) {\r\n            return;\r\n        }\r\n        let box = (0,_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('#' + tabId, md);\r\n        let nav;\r\n        let isFirstTab;\r\n        if (box) {\r\n            box.appendChild(tab);\r\n            nav = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert('.tabs-nav', box);\r\n            isFirstTab = false;\r\n        }\r\n        else {\r\n            box = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create('div', {\r\n                'id': tabId,\r\n                'class': 'tabs'\r\n            });\r\n            tab.wrap(box);\r\n            nav = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create('ul', { 'class': 'tabs-nav' });\r\n            box.insertBefore(nav, tab);\r\n            isFirstTab = true;\r\n        }\r\n        const li = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create('li');\r\n        li.textContent = tabName;\r\n        nav.appendChild(li);\r\n        if (isFirstTab) {\r\n            tab.attr('active', '');\r\n            li.attr('active', '');\r\n        }\r\n        li.addEventListener('click', () => {\r\n            _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].all('[active]', box).forEach(v => v.attr('active', null));\r\n            _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert(`.tab[tab-name=\"${tabName}\"]`, box).attr('active', '');\r\n            li.attr('active', '');\r\n        });\r\n    });\r\n}\r\nfunction beautifyCodeblocks(md) {\r\n    const expandButtonClass = 'show-btn';\r\n    const expandButtonOpenClass = 'show-btn-open';\r\n    function getToolsBgClass(ele) {\r\n        const light = 'tools-light';\r\n        const dark = 'tools-dark';\r\n        const rgbArr = ele.css('background-color')\r\n            .replace(/rgba*\\(/, '')\r\n            .replace(')', '')\r\n            .split(',');\r\n        const color = (0.213 * parseFloat(rgbArr[0]))\r\n            + (0.715 * parseFloat(rgbArr[1]))\r\n            + (0.072 * parseFloat(rgbArr[2]))\r\n            > 255 / 2;\r\n        return color ? dark : light;\r\n    }\r\n    function getToolsHTML(bgClass, lang, copyButton) {\r\n        let toolsHtml = `<div class=\"highlight-tools ${bgClass}\">`;\r\n        toolsHtml += `<span class=\"lang\">${lang}</span>`;\r\n        if (copyButton) {\r\n            toolsHtml += '<span class=\"copy-btn\" data-clipboard-snippet>COPY</span>';\r\n        }\r\n        toolsHtml += '</div>';\r\n        return toolsHtml;\r\n    }\r\n    function codeblockTools(copyButton) {\r\n        _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].all('pre', md).forEach(pre => {\r\n            var _a;\r\n            const bgClass = getToolsBgClass(pre);\r\n            let caption;\r\n            let lang;\r\n            if ((_a = pre.attr('class')) === null || _a === void 0 ? void 0 : _a.includes('language-')) {\r\n                caption = (0,_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('.caption', pre);\r\n                lang = caption ? caption.textContent : pre.attr('data-language');\r\n            }\r\n            else {\r\n                return;\r\n            }\r\n            const wrapper = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create('div', { 'class': 'code-wrapper' });\r\n            pre.wrap(wrapper);\r\n            const html = getToolsHTML(bgClass, lang || 'unknown', copyButton);\r\n            wrapper.insertAdjacentHTML('beforeend', html);\r\n            caption === null || caption === void 0 ? void 0 : caption.remove();\r\n        });\r\n    }\r\n    function switchCodeblockFoldState(table, button, maxHeight, open) {\r\n        if (open === undefined) {\r\n            open = !button.hasClass(expandButtonOpenClass);\r\n        }\r\n        if (open) {\r\n            button.addClass(expandButtonOpenClass);\r\n            table.attr('style', null);\r\n        }\r\n        else {\r\n            button.removeClass(expandButtonOpenClass);\r\n            table.attr('style', `height:${maxHeight}px;overflow:hidden;`);\r\n        }\r\n    }\r\n    function foldCodeblock() {\r\n        const codeConfig = _managers_configManager__WEBPACK_IMPORTED_MODULE_2__[\"default\"].siteConfig.code;\r\n        if (!codeConfig.fold.enable) {\r\n            return;\r\n        }\r\n        const maxHeight = codeConfig.fold.maxHeight;\r\n        const downArrowIcon = codeConfig.fold.downArrowIcon;\r\n        _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].all('pre[class*=language-]', md).forEach(pre => {\r\n            if (pre.clientHeight <= maxHeight) {\r\n                return;\r\n            }\r\n            const codeblockBG = pre.css('background-color');\r\n            const transparent = _utils_anemoUtils__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setColorAlpha(codeblockBG, 0);\r\n            const button = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create('div', {\r\n                'class': expandButtonClass,\r\n                'style': `background-image: linear-gradient(to bottom, ${transparent} 0, ${codeblockBG} 90%);`\r\n            });\r\n            button.insertAdjacentHTML('beforeend', `<i class=\"${downArrowIcon}\"></i>`);\r\n            button.addEventListener('click', () => switchCodeblockFoldState(pre, button, maxHeight));\r\n            pre.parentElement.appendChild(button);\r\n            switchCodeblockFoldState(pre, button, maxHeight, false);\r\n        });\r\n    }\r\n    const copyButton = true;\r\n    codeblockTools(copyButton);\r\n    foldCodeblock();\r\n}\r\nconst component_markdownBeautifier = {\r\n    name: 'markdown-beautifier',\r\n    initialize() { return true; },\r\n    refresh() {\r\n        const markdown = (0,_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(markdownBodySelector);\r\n        if (!markdown) {\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].warning('no markdown.');\r\n            return;\r\n        }\r\n        beautifyH1H2(markdown);\r\n        beautifyTabs(markdown);\r\n        beautifyCodeblocks(markdown);\r\n    }\r\n};\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (component_markdownBeautifier);\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/components/markdownBeautifier.ts?");

/***/ }),

/***/ "./source/_ts/anemo/components/mermaid.ts":
/*!************************************************!*\
  !*** ./source/_ts/anemo/components/mermaid.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _$__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../$ */ \"./source/_ts/anemo/$.ts\");\n/* harmony import */ var _managers_configManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../managers/configManager */ \"./source/_ts/anemo/managers/configManager.ts\");\n/* harmony import */ var _utils_debugUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/debugUtils */ \"./source/_ts/anemo/utils/debugUtils.ts\");\n\r\n\r\n\r\nconst component_mermaid = {\r\n    name: 'mermaid',\r\n    initialize() {\r\n        return false;\r\n    },\r\n    refresh() {\r\n        if (!window.mermaid || !(0,_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('.mermaid')) {\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_2__[\"default\"].warning('no mermaid.');\r\n            return;\r\n        }\r\n        window.mermaid.initialize(_managers_configManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].siteConfig.mermaid.options);\r\n    }\r\n};\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (component_mermaid);\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/components/mermaid.ts?");

/***/ }),

/***/ "./source/_ts/anemo/components/pagination.ts":
/*!***************************************************!*\
  !*** ./source/_ts/anemo/components/pagination.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _$__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../$ */ \"./source/_ts/anemo/$.ts\");\n/* harmony import */ var _utils_debugUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/debugUtils */ \"./source/_ts/anemo/utils/debugUtils.ts\");\n/* harmony import */ var _managers_pjaxManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../managers/pjaxManager */ \"./source/_ts/anemo/managers/pjaxManager.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\nconst paginationContainerSelector = '#pagination';\r\nconst paginationEndedAttr = 'ended';\r\nfunction getPaginationInfo() {\r\n    const container = (0,_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(paginationContainerSelector);\r\n    if (!container ||\r\n        container.childElementCount !== 1 ||\r\n        container.hasAttribute(paginationEndedAttr)) {\r\n        return undefined;\r\n    }\r\n    const trigger = container.children[0];\r\n    const result = {\r\n        container: container,\r\n        trigger: trigger\r\n    };\r\n    const keys = ['current', 'total', 'format', 'selector'];\r\n    for (let i = 0; i < keys.length; i++) {\r\n        const key = keys[i];\r\n        const value = trigger.attr(key);\r\n        if (value) {\r\n            result[key] = (i < 2) ? parseInt(value) : value;\r\n            trigger.attr(key, null);\r\n        }\r\n        else {\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error(`the pagination info lacks attribute '${key}'!`);\r\n            return undefined;\r\n        }\r\n    }\r\n    return result;\r\n}\r\nconst component_pagination = {\r\n    name: 'pagination',\r\n    initialize() { return true; },\r\n    refresh() {\r\n        const info = getPaginationInfo();\r\n        if (!info) {\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_1__[\"default\"].info('no pagination.');\r\n            return;\r\n        }\r\n        const changePage = () => __awaiter(this, void 0, void 0, function* () {\r\n            var _a;\r\n            info.container.attr('loading', '');\r\n            info.current++;\r\n            const url = info.format.replace('%d', info.current.toString());\r\n            const response = yield fetch(url);\r\n            const htmlText = yield response.text();\r\n            const nextPage = new DOMParser().parseFromString(htmlText, 'text/html');\r\n            const contentContainer = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert(info.selector);\r\n            const newContent = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert(info.selector, nextPage);\r\n            (_a = _managers_pjaxManager__WEBPACK_IMPORTED_MODULE_2__[\"default\"].pjax) === null || _a === void 0 ? void 0 : _a.refresh(newContent);\r\n            Array.from(newContent.childNodes).forEach(child => {\r\n                contentContainer.appendChild(child);\r\n            });\r\n            if (info.current === info.total) {\r\n                info.container.attr(paginationEndedAttr, '');\r\n                info.trigger.removeEventListener('click', changePage);\r\n            }\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_1__[\"default\"].info(`pagination: ${info.current - 1} -> ${info.current}.`);\r\n            info.container.attr('loading', null);\r\n        });\r\n        info.trigger.addEventListener('click', changePage);\r\n    }\r\n};\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (component_pagination);\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/components/pagination.ts?");

/***/ }),

/***/ "./source/_ts/anemo/components/scrollDownTip.ts":
/*!******************************************************!*\
  !*** ./source/_ts/anemo/components/scrollDownTip.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _$__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../$ */ \"./source/_ts/anemo/$.ts\");\n/* harmony import */ var _utils_anemoUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/anemoUtils */ \"./source/_ts/anemo/utils/anemoUtils.ts\");\n\r\n\r\nconst component_scrollDownTip = {\r\n    name: 'scroll-down-tip',\r\n    initialize() {\r\n        return true;\r\n    },\r\n    refresh: function () {\r\n        var _a;\r\n        (_a = (0,_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('.scroll-down-tip')) === null || _a === void 0 ? void 0 : _a.addEventListener('click', function () {\r\n            const main = (0,_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('#page');\r\n            main && _utils_anemoUtils__WEBPACK_IMPORTED_MODULE_1__[\"default\"].scrollToElement(main);\r\n        });\r\n    }\r\n};\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (component_scrollDownTip);\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/components/scrollDownTip.ts?");

/***/ }),

/***/ "./source/_ts/anemo/components/sidebar.ts":
/*!************************************************!*\
  !*** ./source/_ts/anemo/components/sidebar.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _$__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../$ */ \"./source/_ts/anemo/$.ts\");\n\r\nconst sidebarSelector = '.sidebar';\r\nconst sidebarSwitchesSelector = '.sidebar-switches';\r\nconst sidebarPanelsSelector = '.sidebar-panels';\r\nconst sidebarTogglerSelector = '.sidebar-toggler';\r\nconst sidebarMaskSelector = '.sidebar-mask';\r\nconst sidebarOpenAttr = 'show';\r\nconst sidebarTogglerOpenClass = 'open';\r\nconst sidebarSwitchTargetPanelAttr = 'target-panel';\r\nconst panel_attr = 'panel';\r\nconst panel_toc = 'toc';\r\nconst panel_overview = 'overview';\r\nconst tocPanelSelector = '.toc';\r\nlet sidebar;\r\nlet sidebarSwitches;\r\nlet sidebarPanels;\r\nlet sidebarToggler;\r\nlet isSidebarOpened = false;\r\nfunction openSidebar() {\r\n    sidebar.attr(sidebarOpenAttr, '');\r\n    sidebarToggler.addClass(sidebarTogglerOpenClass);\r\n    isSidebarOpened = true;\r\n}\r\nfunction closeSidebar() {\r\n    sidebar.attr(sidebarOpenAttr, null);\r\n    sidebarToggler.removeClass(sidebarTogglerOpenClass);\r\n    isSidebarOpened = false;\r\n}\r\nconst component_sidebar = {\r\n    name: 'sidebar',\r\n    initialize() {\r\n        sidebar = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert(sidebarSelector);\r\n        sidebarSwitches = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert(sidebarSwitchesSelector);\r\n        sidebarPanels = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert(sidebarPanelsSelector);\r\n        sidebarToggler = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert(sidebarTogglerSelector);\r\n        sidebarToggler.addEventListener('click', () => {\r\n            if (isSidebarOpened) {\r\n                closeSidebar();\r\n            }\r\n            else {\r\n                openSidebar();\r\n            }\r\n        });\r\n        const switches = sidebarSwitches.children;\r\n        for (let i = 0; i < switches.length; i++) {\r\n            const panel = switches[i].attr(sidebarSwitchTargetPanelAttr);\r\n            switches[i].addEventListener('click', () => {\r\n                sidebarPanels.attr(panel_attr, panel);\r\n            });\r\n        }\r\n        const mask = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert(sidebarMaskSelector);\r\n        mask.addEventListener('click', () => closeSidebar());\r\n        return true;\r\n    },\r\n    refresh() {\r\n        const toc = (0,_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(tocPanelSelector, sidebarPanels);\r\n        if (toc) {\r\n            sidebarSwitches.css('display', null);\r\n            sidebarPanels.attr(panel_attr, panel_toc);\r\n        }\r\n        else {\r\n            sidebarSwitches.css('display', 'none');\r\n            sidebarPanels.attr(panel_attr, panel_overview);\r\n        }\r\n        closeSidebar();\r\n    }\r\n};\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (component_sidebar);\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/components/sidebar.ts?");

/***/ }),

/***/ "./source/_ts/anemo/components/toc.ts":
/*!********************************************!*\
  !*** ./source/_ts/anemo/components/toc.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _$__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../$ */ \"./source/_ts/anemo/$.ts\");\n/* harmony import */ var _utils_anemoUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/anemoUtils */ \"./source/_ts/anemo/utils/anemoUtils.ts\");\n/* harmony import */ var _utils_debugUtils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/debugUtils */ \"./source/_ts/anemo/utils/debugUtils.ts\");\n\r\n\r\n\r\nconst tocSelector = '.toc-body';\r\nconst tocHeaderSelector = '.toc-header';\r\nconst contentSelector = '.markdown-body';\r\nconst headingSelector = 'h1,h2,h3,h4,h5,h6';\r\nconst linkClass = 'tocbot-link';\r\nconst activeLinkClass = 'tocbot-active-link';\r\nconst listClass = 'tocbot-list';\r\nconst listItemClass = 'toc-list-item';\r\nconst activeListItemClass = 'is-active-li';\r\nconst isCollapsedClass = 'tocbot-is-collapsed';\r\nconst collapsibleClass = 'tocbot-is-collapsible';\r\nconst navbarHeight = 120;\r\nfunction calcDepth(heading) {\r\n    return parseInt(heading.tagName.substring(1));\r\n}\r\nfunction createList(parent, collapsible) {\r\n    const tocList = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create('ol', { 'class': listClass });\r\n    parent.appendChild(tocList);\r\n    if (collapsible) {\r\n        tocList.addClass(collapsibleClass, isCollapsedClass);\r\n    }\r\n    return tocList;\r\n}\r\nfunction addItem(tocList, heading) {\r\n    const link = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create('a', {\r\n        'href': '#' + heading.id,\r\n        'class': linkClass\r\n    });\r\n    heading.childNodes.forEach((child, i) => {\r\n        if (i > 0) {\r\n            const newNode = child.cloneNode(true);\r\n            link.appendChild(newNode);\r\n        }\r\n    });\r\n    const li = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create('li', { 'class': listItemClass });\r\n    li.appendChild(link);\r\n    tocList.appendChild(li);\r\n    return li;\r\n}\r\nfunction buildTOC(headings, parent) {\r\n    var _a;\r\n    var _b;\r\n    if (headings.length === 0) {\r\n        return [];\r\n    }\r\n    const dp = [];\r\n    const lastHeadings = [0, -1, -1, -1, -1, -1, -1];\r\n    const tocLinks = [];\r\n    dp[0] = {\r\n        item: parent,\r\n        list: createList(parent, false)\r\n    };\r\n    for (let i = 1; i <= headings.length; i++) {\r\n        const heading = headings[i - 1];\r\n        const depth = calcDepth(heading);\r\n        const j = Math.max(...lastHeadings.slice(0, depth));\r\n        const list = ((_a = (_b = dp[j]).list) !== null && _a !== void 0 ? _a : (_b.list = createList(dp[j].item, true)));\r\n        dp[i] = { item: addItem(list, heading) };\r\n        lastHeadings[depth] = i;\r\n        tocLinks.push(dp[i].item.children[0]);\r\n    }\r\n    return tocLinks;\r\n}\r\nfunction updateToc(headings, tocLinks, activeIndex, top) {\r\n    var _a, _b;\r\n    let currentIndex = -1;\r\n    for (let i = headings.length - 1; i >= 0; --i) {\r\n        const heading = headings[i];\r\n        if (top > (heading.top() - navbarHeight)) {\r\n            currentIndex = i;\r\n            break;\r\n        }\r\n    }\r\n    if (activeIndex !== currentIndex) {\r\n        if (activeIndex >= 0 && activeIndex < headings.length) {\r\n            const link = tocLinks[activeIndex];\r\n            let parent = link.parentElement;\r\n            link.removeClass(activeLinkClass);\r\n            parent.removeClass(activeListItemClass);\r\n            (_a = link.nextElementSibling) === null || _a === void 0 ? void 0 : _a.addClass(isCollapsedClass);\r\n            while (!parent.matches(tocSelector)) {\r\n                if (parent.matches('.' + collapsibleClass)) {\r\n                    parent.addClass(isCollapsedClass);\r\n                }\r\n                parent = parent.parentElement;\r\n            }\r\n        }\r\n        if (top > 0 && currentIndex >= 0 && currentIndex < headings.length) {\r\n            const link = tocLinks[currentIndex];\r\n            let parent = link.parentElement;\r\n            link.addClass(activeLinkClass);\r\n            parent.addClass(activeListItemClass);\r\n            (_b = link.nextElementSibling) === null || _b === void 0 ? void 0 : _b.removeClass(isCollapsedClass);\r\n            while (!parent.matches(tocSelector)) {\r\n                if (parent.matches('.' + collapsibleClass)) {\r\n                    parent.removeClass(isCollapsedClass);\r\n                }\r\n                parent = parent.parentElement;\r\n            }\r\n        }\r\n    }\r\n    return currentIndex;\r\n}\r\nfunction updateScrollPercent(content, top) {\r\n    const progress = content.clientHeight <= 0 ? 1 :\r\n        (Math.max(0, top - content.top()) / content.clientHeight);\r\n    const percentage = Math.min(100, Math.floor(progress * 100));\r\n    _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert(tocHeaderSelector).attr('progress-percentage', percentage + '%');\r\n}\r\nlet scrollEventHandler = null;\r\nconst component_toc = {\r\n    name: 'tocbot',\r\n    initialize() { return true; },\r\n    cleanup() {\r\n        if (!scrollEventHandler) {\r\n            return;\r\n        }\r\n        window.removeEventListener('scroll', scrollEventHandler);\r\n        scrollEventHandler = null;\r\n    },\r\n    refresh() {\r\n        const toc = (0,_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(tocSelector);\r\n        if (!toc) {\r\n            return;\r\n        }\r\n        const content = (0,_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(contentSelector);\r\n        if (!content) {\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_2__[\"default\"].warning('can not build toc because there is no content');\r\n            return;\r\n        }\r\n        const headings = Array.from(_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].all(headingSelector, content))\r\n            .filter(v => v.childNodes.length > 1);\r\n        const tocLinks = buildTOC(headings, toc);\r\n        tocLinks.forEach(link => link.addEventListener('click', e => {\r\n            e.preventDefault();\r\n            _utils_anemoUtils__WEBPACK_IMPORTED_MODULE_1__[\"default\"].scrollToElement(_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert(link.attr('href')));\r\n        }));\r\n        let activeIndex = -1;\r\n        scrollEventHandler = () => {\r\n            const currentTop = window.scrollY || document.documentElement.scrollTop;\r\n            updateScrollPercent(content, currentTop);\r\n            if (tocLinks.length > 0) {\r\n                activeIndex = updateToc(headings, tocLinks, activeIndex, currentTop);\r\n            }\r\n        };\r\n        window.addEventListener('scroll', scrollEventHandler);\r\n        scrollEventHandler();\r\n        _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert('.toc').css('visibility', 'visible');\r\n    }\r\n};\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (component_toc);\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/components/toc.ts?");

/***/ }),

/***/ "./source/_ts/anemo/managers/assetManager.ts":
/*!***************************************************!*\
  !*** ./source/_ts/anemo/managers/assetManager.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _$__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../$ */ \"./source/_ts/anemo/$.ts\");\n/* harmony import */ var _utils_debugUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/debugUtils */ \"./source/_ts/anemo/utils/debugUtils.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\nconst loadedAssets = new Set();\r\nfunction loadJS(url) {\r\n    const script = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create('script', {\r\n        'src': url,\r\n        'type': 'text/javascript',\r\n        'charset': 'UTF-8'\r\n    });\r\n    script.async = false;\r\n    const e = (0,_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('script') || document.head;\r\n    e.parentElement.insertBefore(script, e);\r\n    return new Promise(resolve => {\r\n        script.addEventListener('load', () => resolve());\r\n    });\r\n}\r\nfunction loadCSS(url) {\r\n    const link = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create('link', {\r\n        'rel': 'stylesheet',\r\n        'type': 'text/css',\r\n        'href': url\r\n    });\r\n    const e = (0,_$__WEBPACK_IMPORTED_MODULE_0__[\"default\"])('link') || document.head;\r\n    e.parentElement.insertBefore(link, e);\r\n    return new Promise(resolve => {\r\n        link.addEventListener('load', () => resolve());\r\n    });\r\n}\r\nfunction loadAny(url) {\r\n    const i = url.lastIndexOf('.');\r\n    const ext = url.substring(i + 1);\r\n    switch (ext) {\r\n        case 'js': return loadJS(url);\r\n        case 'css': return loadCSS(url);\r\n        default: return Promise.reject('unknown asset');\r\n    }\r\n}\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\r\n    loadAssetAsync(url) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (loadedAssets.has(url)) {\r\n                return;\r\n            }\r\n            yield loadAny(url);\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_1__[\"default\"].info('load asset: ' + url);\r\n            loadedAssets.add(url);\r\n        });\r\n    },\r\n    loadPageAssetsAsync() {\r\n        const assets = Object.values(window.PAGE_ASSETS).flat();\r\n        const promises = [];\r\n        for (const url of assets) {\r\n            if (loadedAssets.has(url)) {\r\n                continue;\r\n            }\r\n            const promise = loadAny(url).then(() => {\r\n                _utils_debugUtils__WEBPACK_IMPORTED_MODULE_1__[\"default\"].info('load asset: ' + url);\r\n                loadedAssets.add(url);\r\n            });\r\n            promises.push(promise);\r\n        }\r\n        return Promise.allSettled(promises);\r\n    }\r\n});\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/managers/assetManager.ts?");

/***/ }),

/***/ "./source/_ts/anemo/managers/colorSchemeManager.ts":
/*!*********************************************************!*\
  !*** ./source/_ts/anemo/managers/colorSchemeManager.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _$__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../$ */ \"./source/_ts/anemo/$.ts\");\n/* harmony import */ var _utils_debugUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/debugUtils */ \"./source/_ts/anemo/utils/debugUtils.ts\");\n/* harmony import */ var _utils_userpref__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/userpref */ \"./source/_ts/anemo/utils/userpref.ts\");\n\r\n\r\n\r\nconst colorSchemeAttrName = 'data-color-scheme';\r\nconst defaultColorSchemeAttrName = 'data-default-color-scheme';\r\nconst colorSchemeUserPrefKey = 'anemo-color-scheme';\r\nconst mediaQuery = '(prefers-color-scheme: dark)';\r\nconst colorSchemeButtonSelector = '#color-scheme-btn';\r\nlet _changeable = true;\r\nlet _autoChange = true;\r\nlet _scheme = 'light';\r\nconst _callbacks = [];\r\nfunction initMediaQueryEvent(self) {\r\n    if (!_changeable) {\r\n        return;\r\n    }\r\n    window.matchMedia(mediaQuery).addEventListener('change', e => {\r\n        if (_autoChange) {\r\n            self.currentScheme = e.matches ? 'dark' : 'light';\r\n        }\r\n    });\r\n}\r\nfunction initSwitchButton(self) {\r\n    const button = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert(colorSchemeButtonSelector);\r\n    if (_changeable) {\r\n        button.addEventListener('click', () => self.change());\r\n    }\r\n    else {\r\n        button.css('display', 'none');\r\n    }\r\n}\r\nfunction applyScheme(scheme) {\r\n    _scheme = scheme;\r\n    document.documentElement.attr(colorSchemeAttrName, scheme);\r\n    _callbacks.forEach(cb => cb(scheme));\r\n    _utils_debugUtils__WEBPACK_IMPORTED_MODULE_1__[\"default\"].info('color scheme -> %s', scheme);\r\n}\r\nfunction isValid(scheme) {\r\n    return scheme === 'dark' || scheme === 'light';\r\n}\r\nfunction getDefault() {\r\n    const scheme = document.documentElement.attr(defaultColorSchemeAttrName);\r\n    return isValid(scheme) ? scheme : null;\r\n}\r\nfunction getStored() {\r\n    const scheme = (0,_utils_userpref__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(colorSchemeUserPrefKey);\r\n    return isValid(scheme) ? scheme : null;\r\n}\r\nfunction getMediaQuery() {\r\n    const match = window.matchMedia(mediaQuery).matches;\r\n    return match ? 'dark' : 'light';\r\n}\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\r\n    get currentScheme() {\r\n        return _scheme;\r\n    },\r\n    set currentScheme(value) {\r\n        if (!_changeable) {\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_1__[\"default\"].error('can not change color scheme because it is not changeable');\r\n            return;\r\n        }\r\n        if (_scheme === value) {\r\n            return;\r\n        }\r\n        applyScheme(value);\r\n        if (value === getMediaQuery()) {\r\n            (0,_utils_userpref__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(colorSchemeUserPrefKey, null);\r\n            _autoChange = true;\r\n        }\r\n        else {\r\n            (0,_utils_userpref__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(colorSchemeUserPrefKey, value);\r\n            _autoChange = false;\r\n        }\r\n    },\r\n    initialize() {\r\n        let scheme = null;\r\n        let changeable = true;\r\n        let autoChange = true;\r\n        const defaultScheme = getDefault();\r\n        if (defaultScheme) {\r\n            scheme = defaultScheme;\r\n            changeable = false;\r\n            autoChange = false;\r\n        }\r\n        else {\r\n            const storedScheme = getStored();\r\n            if (isValid(storedScheme)) {\r\n                scheme = storedScheme;\r\n                autoChange = false;\r\n            }\r\n        }\r\n        _changeable = changeable;\r\n        _autoChange = autoChange;\r\n        applyScheme(scheme !== null && scheme !== void 0 ? scheme : getMediaQuery());\r\n        initMediaQueryEvent(this);\r\n        initSwitchButton(this);\r\n    },\r\n    change() {\r\n        switch (this.currentScheme) {\r\n            case 'light':\r\n                this.currentScheme = 'dark';\r\n                break;\r\n            case 'dark':\r\n                this.currentScheme = 'light';\r\n                break;\r\n        }\r\n    },\r\n    registerCallback(callback) {\r\n        _callbacks.push(callback);\r\n    }\r\n});\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/managers/colorSchemeManager.ts?");

/***/ }),

/***/ "./source/_ts/anemo/managers/componentManager.ts":
/*!*******************************************************!*\
  !*** ./source/_ts/anemo/managers/componentManager.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _utils_debugUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/debugUtils */ \"./source/_ts/anemo/utils/debugUtils.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\nconst componentAPIMap = new Map();\r\nconst componentList = [];\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\r\n    registerComponentsAsync(...components) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            for (const component of components) {\r\n                let result;\r\n                try {\r\n                    result = component.initialize();\r\n                    if (typeof result !== 'boolean') {\r\n                        result = yield result;\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    _utils_debugUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].error(`failed to initialize and register component '${component.name}'!`, e);\r\n                    continue;\r\n                }\r\n                if (!result) {\r\n                    _utils_debugUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].warning(`component '${component.name}' is not registered because it is disabled!`);\r\n                    continue;\r\n                }\r\n                _utils_debugUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].info(`register component '${component.name}'.`);\r\n                componentList.push(component);\r\n            }\r\n        });\r\n    },\r\n    refreshAllComponentsAsync() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            for (const component of componentList) {\r\n                if (!component.refresh) {\r\n                    continue;\r\n                }\r\n                try {\r\n                    const result = component.refresh();\r\n                    result && (yield result);\r\n                    _utils_debugUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].info(`refresh component '${component.name}'.`);\r\n                }\r\n                catch (e) {\r\n                    _utils_debugUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].error(`failed to refresh component '${component.name}'!`, e);\r\n                }\r\n            }\r\n        });\r\n    },\r\n    cleanupAllComponents() {\r\n        for (const component of componentList) {\r\n            if (!component.cleanup) {\r\n                continue;\r\n            }\r\n            try {\r\n                component.cleanup();\r\n                _utils_debugUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].info(`cleanup component '${component.name}'.`);\r\n            }\r\n            catch (e) {\r\n                _utils_debugUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].error(`failed to cleanup component '${component.name}'!`, e);\r\n            }\r\n        }\r\n    },\r\n    registerAPI(thisObj, componentAPIName, componentAPIFunc) {\r\n        const func = componentAPIFunc.bind(thisObj);\r\n        if (componentAPIMap.has(componentAPIName)) {\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].warning(`component '${thisObj.name}' overrides api '${componentAPIName}'!`);\r\n        }\r\n        else {\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].info(`component '${thisObj.name}' registers api '${componentAPIName}'.`);\r\n        }\r\n        componentAPIMap.set(componentAPIName, func);\r\n    },\r\n    invokeAPI(componentAPIName, ...args) {\r\n        const func = componentAPIMap.get(componentAPIName);\r\n        return func ? {\r\n            success: true,\r\n            value: func(...args)\r\n        } : {\r\n            success: false\r\n        };\r\n    }\r\n});\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/managers/componentManager.ts?");

/***/ }),

/***/ "./source/_ts/anemo/managers/configManager.ts":
/*!****************************************************!*\
  !*** ./source/_ts/anemo/managers/configManager.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nconst configFileUrl = '/site-config.json';\r\nconst configObj = {};\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\r\n    get siteConfig() {\r\n        return configObj;\r\n    },\r\n    get pageConfig() {\r\n        return {};\r\n    },\r\n    initializeAsync() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const response = yield fetch(configFileUrl);\r\n            Object.assign(configObj, yield response.json());\r\n        });\r\n    }\r\n});\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/managers/configManager.ts?");

/***/ }),

/***/ "./source/_ts/anemo/managers/pjaxManager.ts":
/*!**************************************************!*\
  !*** ./source/_ts/anemo/managers/pjaxManager.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nlet pjaxObj = null;\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\r\n    get pjax() {\r\n        return pjaxObj;\r\n    },\r\n    initialize(enable, options, pjaxSendCallback, pjaxSuccessCallback) {\r\n        if (enable) {\r\n            pjaxObj = new Pjax(Object.assign({}, options));\r\n            if (pjaxSendCallback) {\r\n                window.addEventListener('pjax:send', pjaxSendCallback);\r\n            }\r\n            if (pjaxSuccessCallback) {\r\n                window.addEventListener('pjax:success', pjaxSuccessCallback);\r\n            }\r\n        }\r\n        pjaxSuccessCallback === null || pjaxSuccessCallback === void 0 ? void 0 : pjaxSuccessCallback();\r\n    }\r\n});\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/managers/pjaxManager.ts?");

/***/ }),

/***/ "./source/_ts/anemo/miscellaneous/loadingBox.ts":
/*!******************************************************!*\
  !*** ./source/_ts/anemo/miscellaneous/loadingBox.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _$__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../$ */ \"./source/_ts/anemo/$.ts\");\n/* harmony import */ var _utils_anemoUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/anemoUtils */ \"./source/_ts/anemo/utils/anemoUtils.ts\");\n/* harmony import */ var _managers_colorSchemeManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../managers/colorSchemeManager */ \"./source/_ts/anemo/managers/colorSchemeManager.ts\");\n/* harmony import */ var _utils_debugUtils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/debugUtils */ \"./source/_ts/anemo/utils/debugUtils.ts\");\n\r\n\r\n\r\n\r\nconst canvasSelector = '#loading-box canvas';\r\nconst textAreaSelector = '#loading-box p';\r\nconst bgSelector = '#loading-box .loading-bg';\r\nconst timeout = 5;\r\nconst greyColor = [102, 102, 102];\r\nconst elementsColors = [\r\n    [255, 102, 64],\r\n    [0, 192, 255],\r\n    [51, 215, 160],\r\n    [204, 128, 255],\r\n    [170, 255, 41],\r\n    [122, 242, 242],\r\n    [255, 176, 13]\r\n];\r\nlet enabled;\r\nlet startTime;\r\nlet lastUpdateTime;\r\nlet isTimeout;\r\nlet displayProgress;\r\nlet targetProgress;\r\nlet displayCanvas;\r\nlet displayCtx;\r\nlet cachedCanvas;\r\nlet cachedCtx;\r\nlet cachedImageData;\r\nlet windowWidth;\r\nlet windowHeight;\r\nlet imageLoaded;\r\nlet image;\r\nfunction updateView(time) {\r\n    if (displayProgress === 1) {\r\n        document.body.attr('loaded', '');\r\n        return;\r\n    }\r\n    if (!isTimeout) {\r\n        if (startTime) {\r\n            const accumulatedTime = (time - startTime) * 0.001;\r\n            if (accumulatedTime >= timeout) {\r\n                isTimeout = true;\r\n                _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert(textAreaSelector).addClass('active');\r\n            }\r\n        }\r\n        else {\r\n            startTime = time;\r\n        }\r\n    }\r\n    if (lastUpdateTime) {\r\n        const deltaTime = (time - lastUpdateTime) * 0.001;\r\n        const t = Math.min(deltaTime * 10, 0.5);\r\n        displayProgress = _utils_anemoUtils__WEBPACK_IMPORTED_MODULE_1__[\"default\"].lerp(displayProgress, targetProgress, t);\r\n    }\r\n    else {\r\n        displayProgress = 0;\r\n    }\r\n    if (displayProgress >= 0.99) {\r\n        displayProgress = 1;\r\n    }\r\n    lastUpdateTime = time;\r\n    if (imageLoaded && !document.body.hasClass('loaded')) {\r\n        const canvasWidth = document.body.clientWidth * 2;\r\n        const canvasHeight = document.body.clientHeight * 2;\r\n        const dw = Math.max(canvasWidth * 0.25, 264 * 2);\r\n        const dh = dw * image.height / image.width;\r\n        const dx = (canvasWidth - dw) * 0.5;\r\n        const dy = (canvasHeight - dh) * 0.5;\r\n        if (windowWidth !== canvasWidth || windowHeight !== canvasHeight || !cachedImageData) {\r\n            cachedCanvas.width = canvasWidth;\r\n            cachedCanvas.height = canvasHeight;\r\n            displayCanvas.width = canvasWidth;\r\n            displayCanvas.height = canvasHeight;\r\n            windowWidth = canvasWidth;\r\n            windowHeight = canvasHeight;\r\n            cachedCtx.drawImage(image, dx, dy, dw, dh);\r\n            cachedImageData = cachedCtx.getImageData(dx, dy, dw, dh);\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].warning('resize loading box canvas.');\r\n        }\r\n        const lenX = dw * 4;\r\n        const fillLenX = lenX * displayProgress;\r\n        const data = cachedImageData.data;\r\n        let singleColor;\r\n        let backRGB;\r\n        if (_managers_colorSchemeManager__WEBPACK_IMPORTED_MODULE_2__[\"default\"].currentScheme === 'light') {\r\n            singleColor = true;\r\n            backRGB = [255, 255, 255];\r\n        }\r\n        else {\r\n            singleColor = false;\r\n            backRGB = [102, 102, 102];\r\n        }\r\n        for (let x = 0; x < lenX; x += 4) {\r\n            for (let y = 0; y < dh; y++) {\r\n                const i = x + y * lenX;\r\n                let rgb;\r\n                if (x < fillLenX) {\r\n                    if (singleColor) {\r\n                        rgb = greyColor;\r\n                    }\r\n                    else {\r\n                        const index = Math.floor(x * elementsColors.length / lenX);\r\n                        rgb = elementsColors[index];\r\n                    }\r\n                }\r\n                else {\r\n                    rgb = backRGB;\r\n                }\r\n                if (data[i + 3] > 0) {\r\n                    data[i] = rgb[0];\r\n                    data[i + 1] = rgb[1];\r\n                    data[i + 2] = rgb[2];\r\n                }\r\n            }\r\n        }\r\n        displayCtx.putImageData(cachedImageData, dx, dy);\r\n    }\r\n    requestAnimationFrame(updateView);\r\n}\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\r\n    initialize(enable, imageSrc) {\r\n        enabled = enable;\r\n        if (!enabled) {\r\n            return;\r\n        }\r\n        isTimeout = false;\r\n        displayProgress = 1;\r\n        targetProgress = 1;\r\n        displayCanvas = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert(canvasSelector);\r\n        displayCtx = displayCanvas.getContext('2d');\r\n        cachedCanvas = document.createElement('canvas');\r\n        cachedCtx = cachedCanvas.getContext('2d', { willReadFrequently: true });\r\n        imageLoaded = false;\r\n        image = new Image();\r\n        image.onload = () => imageLoaded = true;\r\n        image.onerror = () => _utils_debugUtils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error('download genshin loading image failed, because an error occurred.');\r\n        image.onabort = () => _utils_debugUtils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error('download genshin loading image failed, because download is aborted.');\r\n        image.src = imageSrc;\r\n        _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert(bgSelector).addEventListener('click', () => {\r\n            if (!isTimeout) {\r\n                return;\r\n            }\r\n            document.body.attr('loaded', '');\r\n            _utils_debugUtils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].warning('loading box is forced to be hidden.');\r\n        });\r\n    },\r\n    display(progress, text) {\r\n        if (!enabled) {\r\n            return;\r\n        }\r\n        targetProgress = progress;\r\n        _utils_debugUtils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].info(text);\r\n        if (displayProgress < 1) {\r\n            return;\r\n        }\r\n        if (isTimeout) {\r\n            _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert(textAreaSelector).removeClass('active');\r\n        }\r\n        startTime = undefined;\r\n        lastUpdateTime = undefined;\r\n        isTimeout = false;\r\n        displayProgress = 0;\r\n        displayCtx.clearRect(0, 0, displayCanvas.width, displayCanvas.height);\r\n        requestAnimationFrame(updateView);\r\n        document.body.attr('loaded', null);\r\n    }\r\n});\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/miscellaneous/loadingBox.ts?");

/***/ }),

/***/ "./source/_ts/anemo/miscellaneous/topLayerPanel.ts":
/*!*********************************************************!*\
  !*** ./source/_ts/anemo/miscellaneous/topLayerPanel.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ TopLayerPanel)\n/* harmony export */ });\n/* harmony import */ var _$__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../$ */ \"./source/_ts/anemo/$.ts\");\n/* harmony import */ var _utils_debugUtils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/debugUtils */ \"./source/_ts/anemo/utils/debugUtils.ts\");\n\r\n\r\nclass TopLayerPanel {\r\n    constructor(panelSelector, openButtonSelector, events) {\r\n        this._panel = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert(panelSelector);\r\n        this._openButton = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert(openButtonSelector);\r\n        this._closeButton = _$__WEBPACK_IMPORTED_MODULE_0__[\"default\"].assert('.top-layer-panel-close-btn', this._panel);\r\n        this._state = 'closed';\r\n        this.setState();\r\n        this._openButton.addEventListener('click', () => {\r\n            if (events === null || events === void 0 ? void 0 : events.beforeOpen) {\r\n                events.beforeOpen();\r\n            }\r\n            this.openAsync().then(events === null || events === void 0 ? void 0 : events.afterOpen);\r\n        });\r\n        this._closeButton.addEventListener('click', () => {\r\n            if (events === null || events === void 0 ? void 0 : events.beforeClose) {\r\n                events.beforeClose();\r\n            }\r\n            this.closeAsync().then(events === null || events === void 0 ? void 0 : events.afterClose);\r\n        });\r\n    }\r\n    setState(value) {\r\n        if (value) {\r\n            this._state = value;\r\n        }\r\n        this._panel.attr('state', this._state);\r\n    }\r\n    resetTransition(transitionTime) {\r\n        const rect = this._openButton.getBoundingClientRect();\r\n        const x = 0.5 * (rect.left + rect.right);\r\n        const y = 0.5 * (rect.top + rect.bottom);\r\n        this._panel.css({\r\n            'transform-origin': `${x}px ${y}px`,\r\n            '-webkit-transform-origin': `${x}px ${y}px`,\r\n            'animation-duration': `${transitionTime / 1000}s`,\r\n            '-webkit-animation-duration': `${transitionTime / 1000}s`\r\n        });\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n    get panelElement() {\r\n        return this._panel;\r\n    }\r\n    get openBtnElement() {\r\n        return this._openButton;\r\n    }\r\n    get closeBtnElement() {\r\n        return this._closeButton;\r\n    }\r\n    openAsync(animate = true, force = false) {\r\n        if (this._state !== 'closed') {\r\n            if (!force) {\r\n                _utils_debugUtils__WEBPACK_IMPORTED_MODULE_1__[\"default\"].warning('can not open panel, because it is ' + this._state);\r\n            }\r\n            return Promise.resolve();\r\n        }\r\n        document.body.css('overflow', 'hidden');\r\n        if (animate) {\r\n            const transitionTime = 200;\r\n            this.resetTransition(transitionTime);\r\n            this.setState('opening');\r\n            return new Promise(resolve => setTimeout(() => {\r\n                this.setState('opened');\r\n                resolve();\r\n            }, transitionTime));\r\n        }\r\n        else {\r\n            this.setState('opened');\r\n            return Promise.resolve();\r\n        }\r\n    }\r\n    closeAsync(animate = true, force = false) {\r\n        if (this._state !== 'opened') {\r\n            if (!force) {\r\n                _utils_debugUtils__WEBPACK_IMPORTED_MODULE_1__[\"default\"].warning('can not close panel, because it is ' + this._state);\r\n            }\r\n            return Promise.resolve();\r\n        }\r\n        document.body.css('overflow', null);\r\n        if (animate) {\r\n            const transitionTime = 200;\r\n            this.resetTransition(transitionTime);\r\n            this.setState('closing');\r\n            return new Promise(resolve => setTimeout(() => {\r\n                this.setState('closed');\r\n                resolve();\r\n            }, transitionTime));\r\n        }\r\n        else {\r\n            this.setState('closed');\r\n            return Promise.resolve();\r\n        }\r\n    }\r\n}\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/miscellaneous/topLayerPanel.ts?");

/***/ }),

/***/ "./source/_ts/anemo/requiredComponents.ts":
/*!************************************************!*\
  !*** ./source/_ts/anemo/requiredComponents.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _components_bgMusic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components/bgMusic */ \"./source/_ts/anemo/components/bgMusic.ts\");\n/* harmony import */ var _components_comments_twikoo__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/comments/twikoo */ \"./source/_ts/anemo/components/comments/twikoo.ts\");\n/* harmony import */ var _components_fancybox__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/fancybox */ \"./source/_ts/anemo/components/fancybox.ts\");\n/* harmony import */ var _components_localSearch__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/localSearch */ \"./source/_ts/anemo/components/localSearch.ts\");\n/* harmony import */ var _components_markdownBeautifier__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/markdownBeautifier */ \"./source/_ts/anemo/components/markdownBeautifier.ts\");\n/* harmony import */ var _components_mermaid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/mermaid */ \"./source/_ts/anemo/components/mermaid.ts\");\n/* harmony import */ var _components_pagination__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/pagination */ \"./source/_ts/anemo/components/pagination.ts\");\n/* harmony import */ var _components_scrollDownTip__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./components/scrollDownTip */ \"./source/_ts/anemo/components/scrollDownTip.ts\");\n/* harmony import */ var _components_sidebar__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./components/sidebar */ \"./source/_ts/anemo/components/sidebar.ts\");\n/* harmony import */ var _components_toc__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./components/toc */ \"./source/_ts/anemo/components/toc.ts\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ([\r\n    _components_scrollDownTip__WEBPACK_IMPORTED_MODULE_7__[\"default\"],\r\n    _components_toc__WEBPACK_IMPORTED_MODULE_9__[\"default\"],\r\n    _components_sidebar__WEBPACK_IMPORTED_MODULE_8__[\"default\"],\r\n    _components_markdownBeautifier__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\r\n    _components_pagination__WEBPACK_IMPORTED_MODULE_6__[\"default\"],\r\n    _components_localSearch__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\r\n    _components_bgMusic__WEBPACK_IMPORTED_MODULE_0__[\"default\"],\r\n    _components_fancybox__WEBPACK_IMPORTED_MODULE_2__[\"default\"],\r\n    _components_mermaid__WEBPACK_IMPORTED_MODULE_5__[\"default\"],\r\n    _components_comments_twikoo__WEBPACK_IMPORTED_MODULE_1__[\"default\"]\r\n]);\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/requiredComponents.ts?");

/***/ }),

/***/ "./source/_ts/anemo/utils/anemoUtils.ts":
/*!**********************************************!*\
  !*** ./source/_ts/anemo/utils/anemoUtils.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\r\n    randomInt(minInclusive, maxExclusive) {\r\n        return Math.floor((Math.random() * maxExclusive) + minInclusive);\r\n    },\r\n    lerp(a, b, t) {\r\n        return a + t * (b - a);\r\n    },\r\n    scrollToElement(element) {\r\n        window.scrollTo({\r\n            top: element.top(),\r\n            behavior: 'smooth'\r\n        });\r\n    },\r\n    hexToRGBA(hex, a) {\r\n        const r = parseInt('0x' + hex.slice(1, 3));\r\n        const g = parseInt('0x' + hex.slice(3, 5));\r\n        const b = parseInt('0x' + hex.slice(5, 7));\r\n        return `rgba(${r}, ${g}, ${b}, ${a})`;\r\n    },\r\n    RGBToRGBA(rgb, a) {\r\n        const components = rgb.match(/rgba?\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*[\\d.]+\\s*)?\\)/i);\r\n        return `rgba(${components[1]}, ${components[2]}, ${components[3]}, ${a})`;\r\n    },\r\n    setColorAlpha(color, a) {\r\n        if (color.startsWith('#')) {\r\n            return this.hexToRGBA(color, a);\r\n        }\r\n        else {\r\n            return this.RGBToRGBA(color, a);\r\n        }\r\n    }\r\n});\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/utils/anemoUtils.ts?");

/***/ }),

/***/ "./source/_ts/anemo/utils/debugUtils.ts":
/*!**********************************************!*\
  !*** ./source/_ts/anemo/utils/debugUtils.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\r\n    info(...messages) {\r\n        if (messages.length === 0) {\r\n            messages.push('');\r\n        }\r\n        if (typeof messages[0] !== 'string') {\r\n            messages.unshift('');\r\n        }\r\n        console.log('%cINFO%c %s', 'color:green;', '', ...messages);\r\n    },\r\n    warning(...messages) {\r\n        if (messages.length === 0) {\r\n            messages.push('');\r\n        }\r\n        if (typeof messages[0] !== 'string') {\r\n            messages.unshift('');\r\n        }\r\n        console.log('%cWARNING%c %s', 'color:yellow;', '', ...messages);\r\n    },\r\n    error(...messages) {\r\n        if (messages.length === 0) {\r\n            messages.push('');\r\n        }\r\n        if (typeof messages[0] !== 'string') {\r\n            messages.unshift('');\r\n        }\r\n        console.log('%cERROR%c %s', 'color:red;', '', ...messages);\r\n    }\r\n});\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/utils/debugUtils.ts?");

/***/ }),

/***/ "./source/_ts/anemo/utils/musicUtils.ts":
/*!**********************************************!*\
  !*** ./source/_ts/anemo/utils/musicUtils.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _debugUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./debugUtils */ \"./source/_ts/anemo/utils/debugUtils.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\nconst musicLinkParseRules = [\r\n    ['music.163.com.*song.*id=(\\\\d+)', 'netease', 'song'],\r\n    ['music.163.com.*album.*id=(\\\\d+)', 'netease', 'album'],\r\n    ['music.163.com.*artist.*id=(\\\\d+)', 'netease', 'artist'],\r\n    ['music.163.com.*playlist.*id=(\\\\d+)', 'netease', 'playlist'],\r\n    ['music.163.com.*discover/toplist.*id=(\\\\d+)', 'netease', 'playlist'],\r\n    ['y.qq.com.*song/(\\\\w+).html', 'tencent', 'song'],\r\n    ['y.qq.com.*album/(\\\\w+).html', 'tencent', 'album'],\r\n    ['y.qq.com.*singer/(\\\\w+).html', 'tencent', 'artist'],\r\n    ['y.qq.com.*playsquare/(\\\\w+).html', 'tencent', 'playlist'],\r\n    ['y.qq.com.*playlist/(\\\\w+).html', 'tencent', 'playlist'],\r\n    ['xiami.com.*song/(\\\\w+)', 'xiami', 'song'],\r\n    ['xiami.com.*album/(\\\\w+)', 'xiami', 'album'],\r\n    ['xiami.com.*artist/(\\\\w+)', 'xiami', 'artist'],\r\n    ['xiami.com.*collect/(\\\\w+)', 'xiami', 'playlist'],\r\n];\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\r\n    parseLink(link) {\r\n        for (const rule of musicLinkParseRules) {\r\n            const pattern = new RegExp(rule[0]);\r\n            const res = pattern.exec(link);\r\n            if (!res) {\r\n                continue;\r\n            }\r\n            return {\r\n                'server': rule[1],\r\n                'type': rule[2],\r\n                'id': res[1]\r\n            };\r\n        }\r\n        return null;\r\n    },\r\n    requestAPIAsync(links) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const promises = links.map((link) => __awaiter(this, void 0, void 0, function* () {\r\n                const meta = this.parseLink(link);\r\n                if (!meta) {\r\n                    _debugUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].warning('invalid music link: ' + link);\r\n                    return [];\r\n                }\r\n                const url = `https://api.i-meto.com/meting/api?server=${meta.server}&type=${meta.type}&id=${meta.id}&r=${Math.random()}`;\r\n                const res = yield fetch(url);\r\n                return yield res.json();\r\n            }));\r\n            const results = yield Promise.all(promises);\r\n            return results.flat(1);\r\n        });\r\n    },\r\n    formatTime(seconds) {\r\n        const hour = Math.floor(seconds / 3600);\r\n        const min = Math.floor((seconds - hour * 3600) / 60);\r\n        const sec = Math.floor(seconds - hour * 3600 - min * 60);\r\n        return (hour > 0 ? [hour, min, sec] : [min, sec]).map(num => {\r\n            return isNaN(num) ? '00' : (num < 10 ? ('0' + num) : ('' + num));\r\n        }).join(':');\r\n    },\r\n    autoplay(callback) {\r\n        let enable = true;\r\n        const trigger = () => {\r\n            if (!enable) {\r\n                return;\r\n            }\r\n            enable = false;\r\n            callback();\r\n            document.removeEventListener('mousedown', trigger);\r\n            document.removeEventListener('scroll', trigger);\r\n            document.removeEventListener('touchstart', trigger);\r\n        };\r\n        document.addEventListener('mousedown', trigger);\r\n        document.addEventListener('scroll', trigger);\r\n        document.addEventListener('touchstart', trigger);\r\n        return () => {\r\n            if (!enable) {\r\n                return;\r\n            }\r\n            document.removeEventListener('mousedown', trigger);\r\n            document.removeEventListener('scroll', trigger);\r\n            document.removeEventListener('touchstart', trigger);\r\n        };\r\n    }\r\n});\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/utils/musicUtils.ts?");

/***/ }),

/***/ "./source/_ts/anemo/utils/userpref.ts":
/*!********************************************!*\
  !*** ./source/_ts/anemo/utils/userpref.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _debugUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./debugUtils */ \"./source/_ts/anemo/utils/debugUtils.ts\");\n\r\nfunction userPref(key, value) {\r\n    try {\r\n        if (typeof value === 'undefined') {\r\n            return localStorage.getItem(key);\r\n        }\r\n        else if (typeof value === 'string') {\r\n            localStorage.setItem(key, value);\r\n            _debugUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].info('save user pref \\'%s\\': \\'%s\\'', key, value);\r\n        }\r\n        else {\r\n            localStorage.removeItem(key);\r\n            _debugUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].info('remove user pref \\'%s\\'', key);\r\n        }\r\n    }\r\n    catch (e) {\r\n        if (typeof value === 'undefined') {\r\n            _debugUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].error('can not get user pref', e);\r\n        }\r\n        else if (typeof value === 'string') {\r\n            _debugUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].error('can not set user pref', e);\r\n        }\r\n        else {\r\n            _debugUtils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].error('can not remove user pref', e);\r\n        }\r\n    }\r\n}\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (userPref);\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/anemo/utils/userpref.ts?");

/***/ }),

/***/ "./source/_ts/extensions.ts":
/*!**********************************!*\
  !*** ./source/_ts/extensions.ts ***!
  \**********************************/
/***/ (() => {

eval("\r\nObject.assign(Element.prototype, {\r\n    attr: function (qualifiedName, value) {\r\n        const e = this;\r\n        if (typeof value === 'undefined') {\r\n            return e.getAttribute(qualifiedName);\r\n        }\r\n        if (typeof value === 'string') {\r\n            e.setAttribute(qualifiedName, value);\r\n            return e;\r\n        }\r\n        e.removeAttribute(qualifiedName);\r\n        return e;\r\n    },\r\n    addClass: function (...classNames) {\r\n        const e = this;\r\n        classNames.forEach(v => e.classList.add(v));\r\n        return e;\r\n    },\r\n    removeClass: function (...classNames) {\r\n        const e = this;\r\n        classNames.forEach(v => e.classList.remove(v));\r\n        return e;\r\n    },\r\n    toggleClass: function (...classNames) {\r\n        const e = this;\r\n        classNames.forEach(v => e.classList.toggle(v));\r\n        return e;\r\n    },\r\n    hasClass: function (className) {\r\n        const e = this;\r\n        return e.classList.contains(className);\r\n    }\r\n});\r\nObject.assign(HTMLElement.prototype, {\r\n    top: function () {\r\n        const e = this;\r\n        let result = e.offsetTop;\r\n        let parent = e.offsetParent;\r\n        while (parent) {\r\n            result += parent.offsetTop;\r\n            parent = parent.offsetParent;\r\n        }\r\n        return result;\r\n    },\r\n    left: function () {\r\n        const e = this;\r\n        let result = e.offsetLeft;\r\n        let parent = e.offsetParent;\r\n        while (parent) {\r\n            result += parent.offsetLeft;\r\n            parent = parent.offsetParent;\r\n        }\r\n        return result;\r\n    },\r\n    css: function (propertyNameOrProperties, value) {\r\n        const e = this;\r\n        if (typeof propertyNameOrProperties === 'string') {\r\n            if (typeof value === 'undefined') {\r\n                const style = getComputedStyle(e);\r\n                return style.getPropertyValue(propertyNameOrProperties);\r\n            }\r\n            e.style.setProperty(propertyNameOrProperties, value);\r\n        }\r\n        else {\r\n            for (const propertyName in propertyNameOrProperties) {\r\n                const value = propertyNameOrProperties[propertyName];\r\n                e.style.setProperty(propertyName, value);\r\n            }\r\n        }\r\n        return e;\r\n    },\r\n    wrap: function (container) {\r\n        const e = this;\r\n        const parent = e.parentElement;\r\n        parent.insertBefore(container, e);\r\n        parent.removeChild(e);\r\n        container.appendChild(e);\r\n        return e;\r\n    }\r\n});\r\nObject.assign(Array.prototype, {\r\n    peek: function () {\r\n        const array = this;\r\n        if (array.length === 0) {\r\n            return undefined;\r\n        }\r\n        return array[array.length - 1];\r\n    }\r\n});\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/extensions.ts?");

/***/ }),

/***/ "./source/_ts/main.ts":
/*!****************************!*\
  !*** ./source/_ts/main.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _extensions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./extensions */ \"./source/_ts/extensions.ts\");\n/* harmony import */ var _extensions__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_extensions__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _anemo_managers_assetManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./anemo/managers/assetManager */ \"./source/_ts/anemo/managers/assetManager.ts\");\n/* harmony import */ var _anemo_managers_colorSchemeManager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./anemo/managers/colorSchemeManager */ \"./source/_ts/anemo/managers/colorSchemeManager.ts\");\n/* harmony import */ var _anemo_managers_componentManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./anemo/managers/componentManager */ \"./source/_ts/anemo/managers/componentManager.ts\");\n/* harmony import */ var _anemo_managers_configManager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./anemo/managers/configManager */ \"./source/_ts/anemo/managers/configManager.ts\");\n/* harmony import */ var _anemo_miscellaneous_loadingBox__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./anemo/miscellaneous/loadingBox */ \"./source/_ts/anemo/miscellaneous/loadingBox.ts\");\n/* harmony import */ var _anemo_managers_pjaxManager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./anemo/managers/pjaxManager */ \"./source/_ts/anemo/managers/pjaxManager.ts\");\n/* harmony import */ var _anemo_requiredComponents__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./anemo/requiredComponents */ \"./source/_ts/anemo/requiredComponents.ts\");\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction refreshPageAsync() {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        _anemo_miscellaneous_loadingBox__WEBPACK_IMPORTED_MODULE_5__[\"default\"].display(0.7, 'loading assets...');\r\n        yield _anemo_managers_assetManager__WEBPACK_IMPORTED_MODULE_1__[\"default\"].loadPageAssetsAsync();\r\n        _anemo_miscellaneous_loadingBox__WEBPACK_IMPORTED_MODULE_5__[\"default\"].display(0.94, 'refreshing...');\r\n        yield _anemo_managers_componentManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"].refreshAllComponentsAsync();\r\n        _anemo_miscellaneous_loadingBox__WEBPACK_IMPORTED_MODULE_5__[\"default\"].display(1, 'success');\r\n    });\r\n}\r\n_anemo_managers_colorSchemeManager__WEBPACK_IMPORTED_MODULE_2__[\"default\"].initialize();\r\ndocument.addEventListener('DOMContentLoaded', () => __awaiter(void 0, void 0, void 0, function* () {\r\n    yield _anemo_managers_configManager__WEBPACK_IMPORTED_MODULE_4__[\"default\"].initializeAsync();\r\n    const loadingConfig = _anemo_managers_configManager__WEBPACK_IMPORTED_MODULE_4__[\"default\"].siteConfig.loading_box;\r\n    _anemo_miscellaneous_loadingBox__WEBPACK_IMPORTED_MODULE_5__[\"default\"].initialize(loadingConfig.enable, loadingConfig.image_src);\r\n    _anemo_miscellaneous_loadingBox__WEBPACK_IMPORTED_MODULE_5__[\"default\"].display(0.45, 'initializing site...');\r\n    yield _anemo_managers_componentManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"].registerComponentsAsync(..._anemo_requiredComponents__WEBPACK_IMPORTED_MODULE_7__[\"default\"]);\r\n    _anemo_managers_pjaxManager__WEBPACK_IMPORTED_MODULE_6__[\"default\"].initialize(_anemo_managers_configManager__WEBPACK_IMPORTED_MODULE_4__[\"default\"].siteConfig.pjax.enable, _anemo_managers_configManager__WEBPACK_IMPORTED_MODULE_4__[\"default\"].siteConfig.pjax.options, () => {\r\n        _anemo_miscellaneous_loadingBox__WEBPACK_IMPORTED_MODULE_5__[\"default\"].display(0.45, 'changing page...');\r\n        _anemo_managers_componentManager__WEBPACK_IMPORTED_MODULE_3__[\"default\"].cleanupAllComponents();\r\n    }, () => {\r\n        refreshPageAsync();\r\n    });\r\n}));\r\n\n\n//# sourceURL=webpack://hexo-theme-anemo/./source/_ts/main.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./source/_ts/main.ts");
/******/ 	
/******/ })()
;